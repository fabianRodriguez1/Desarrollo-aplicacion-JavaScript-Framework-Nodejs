<?xml version="1.0" encoding="UTF-8"?>
<testExecutions version="1">
  <file path="/home/manuel/Documents/github/node-express-boilerplate/tests/unit/models/plugins/paginate.plugin.test.js">
    <testCase name="paginate plugin populate option should populate the specified data fields" duration="730"/>
    <testCase name="paginate plugin populate option should populate nested fields" duration="670"/>
  </file>
  <file path="/home/manuel/Documents/github/node-express-boilerplate/tests/unit/models/user.model.test.js">
    <testCase name="User model User validation should correctly validate a valid user" duration="7"/>
    <testCase name="User model User validation should throw a validation error if email is invalid" duration="4"/>
    <testCase name="User model User validation should throw a validation error if password length is less than 8 characters" duration="3"/>
    <testCase name="User model User validation should throw a validation error if password does not contain numbers" duration="2"/>
    <testCase name="User model User validation should throw a validation error if password does not contain letters" duration="2"/>
    <testCase name="User model User validation should throw a validation error if role is unknown" duration="1"/>
    <testCase name="User model User toJSON() should not return user password when toJSON is called" duration="1"/>
  </file>
  <file path="/home/manuel/Documents/github/node-express-boilerplate/tests/unit/middlewares/error.test.js">
    <testCase name="Error middlewares Error converter should return the same ApiError object it was called with" duration="4"/>
    <testCase name="Error middlewares Error converter should convert an Error to ApiError and preserve its status and message" duration="2"/>
    <testCase name="Error middlewares Error converter should convert an Error without status to ApiError with status 500" duration="2"/>
    <testCase name="Error middlewares Error converter should convert an Error without message to ApiError with default message of that http status" duration="1"/>
    <testCase name="Error middlewares Error converter should convert a Mongoose error to ApiError with status 400 and preserve its message" duration="1"/>
    <testCase name="Error middlewares Error converter should convert any other object to ApiError with status 500 and its message" duration="1"/>
    <testCase name="Error middlewares Error handler should send proper error response and put the error message in res.locals" duration="1"/>
    <testCase name="Error middlewares Error handler should put the error stack in the response if in development mode" duration="2"/>
    <testCase name="Error middlewares Error handler should send internal server error status and message if in production mode and error is not operational" duration="0"/>
    <testCase name="Error middlewares Error handler should preserve original error status and message if in production mode and error is operational" duration="1"/>
  </file>
  <file path="/home/manuel/Documents/github/node-express-boilerplate/tests/integration/docs.test.js">
    <testCase name="Auth routes GET /v1/docs should return 404 when running in production" duration="25"/>
  </file>
  <file path="/home/manuel/Documents/github/node-express-boilerplate/tests/unit/models/plugins/toJSON.plugin.test.js">
    <testCase name="toJSON plugin should replace _id with id" duration="3"/>
    <testCase name="toJSON plugin should remove __v" duration="2"/>
    <testCase name="toJSON plugin should remove createdAt and updatedAt" duration="2"/>
    <testCase name="toJSON plugin should remove any path set as private" duration="3"/>
    <testCase name="toJSON plugin should remove any nested paths set as private" duration="2"/>
    <testCase name="toJSON plugin should also call the schema toJSON transform function" duration="2"/>
  </file>
  <file path="/home/manuel/Documents/github/node-express-boilerplate/tests/integration/user.test.js">
    <testCase name="User routes POST /v1/users should return 201 and successfully create new user if data is ok" duration="611">
      <failure message="TypeError: Cannot read property &apos;includes&apos; of undefined"><![CDATA[TypeError: Cannot read property 'includes' of undefined
    at every (/home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:14:82)
    at Array.every (<anonymous>)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:14:46
    at JwtStrategy.strategy.success (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:219:18)
    at done (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:115:41)
    at JwtStrategy.jwtVerify [as _verify] (/home/manuel/Documents/github/node-express-boilerplate/src/config/passport.js:20:5)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:123:34
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:223:12
    at getSecret (/home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:90:14)
    at Object.<anonymous>.module.exports [as verify] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:94:10)
    at Function.Object.<anonymous>.module.exports [as JwtVerifier] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/verify_jwt.js:4:16)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:104:25
    at JwtStrategy._secretOrKeyProvider (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:40:13)
    at JwtStrategy.Object.<anonymous>.JwtStrategy.authenticate (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:99:10)
    at attempt (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:366:16)
    at authenticate (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:367:7)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:25:5
    at new Promise (<anonymous>)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:24:10
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:137:13)
    at Route.dispatch (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:112:3)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:281:22
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:174:3)
    at router (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:174:3)
    at router (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at initialize (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/initialize.js:53:5)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at cors (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:188:7)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:224:17
    at originCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:214:15)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:219:13
    at optionsCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:199:9)
    at corsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:204:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at compression (/home/manuel/Documents/github/node-express-boilerplate/node_modules/compression/index.js:220:5)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express-mongo-sanitize/index.js:84:5
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/xss-clean/src/index.js:13:5
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at urlencodedParser (/home/manuel/Documents/github/node-express-boilerplate/node_modules/body-parser/lib/types/urlencoded.js:82:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/body-parser/lib/read.js:130:5
    at invokeCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/raw-body/index.js:224:16)
    at done (/home/manuel/Documents/github/node-express-boilerplate/node_modules/raw-body/index.js:213:7)
    at IncomingMessage.onEnd (/home/manuel/Documents/github/node-express-boilerplate/node_modules/raw-body/index.js:273:7)
    at IncomingMessage.emit (events.js:327:22)
    at endReadableNT (internal/streams/readable.js:1327:12)
    at processTicksAndRejections (internal/process/task_queues.js:80:21)]]></failure>
    </testCase>
    <testCase name="User routes POST /v1/users should be able to create an admin as well" duration="207">
      <failure message="TypeError: Cannot read property &apos;includes&apos; of undefined"><![CDATA[TypeError: Cannot read property 'includes' of undefined
    at every (/home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:14:82)
    at Array.every (<anonymous>)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:14:46
    at JwtStrategy.strategy.success (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:219:18)
    at done (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:115:41)
    at JwtStrategy.jwtVerify [as _verify] (/home/manuel/Documents/github/node-express-boilerplate/src/config/passport.js:20:5)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:123:34
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:223:12
    at getSecret (/home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:90:14)
    at Object.<anonymous>.module.exports [as verify] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:94:10)
    at Function.Object.<anonymous>.module.exports [as JwtVerifier] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/verify_jwt.js:4:16)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:104:25
    at JwtStrategy._secretOrKeyProvider (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:40:13)
    at JwtStrategy.Object.<anonymous>.JwtStrategy.authenticate (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:99:10)
    at attempt (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:366:16)
    at authenticate (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:367:7)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:25:5
    at new Promise (<anonymous>)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:24:10
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:137:13)
    at Route.dispatch (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:112:3)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:281:22
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:174:3)
    at router (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:174:3)
    at router (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at initialize (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/initialize.js:53:5)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at cors (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:188:7)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:224:17
    at originCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:214:15)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:219:13
    at optionsCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:199:9)
    at corsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:204:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at compression (/home/manuel/Documents/github/node-express-boilerplate/node_modules/compression/index.js:220:5)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express-mongo-sanitize/index.js:84:5
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/xss-clean/src/index.js:13:5
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at urlencodedParser (/home/manuel/Documents/github/node-express-boilerplate/node_modules/body-parser/lib/types/urlencoded.js:82:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/body-parser/lib/read.js:130:5
    at invokeCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/raw-body/index.js:224:16)
    at done (/home/manuel/Documents/github/node-express-boilerplate/node_modules/raw-body/index.js:213:7)
    at IncomingMessage.onEnd (/home/manuel/Documents/github/node-express-boilerplate/node_modules/raw-body/index.js:273:7)
    at IncomingMessage.emit (events.js:327:22)
    at endReadableNT (internal/streams/readable.js:1327:12)
    at processTicksAndRejections (internal/process/task_queues.js:80:21)]]></failure>
    </testCase>
    <testCase name="User routes POST /v1/users should return 401 error if access token is missing" duration="105"/>
    <testCase name="User routes POST /v1/users should return 403 error if logged in user is not admin" duration="194">
      <failure message="TypeError: Cannot read property &apos;includes&apos; of undefined"><![CDATA[TypeError: Cannot read property 'includes' of undefined
    at every (/home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:14:82)
    at Array.every (<anonymous>)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:14:46
    at JwtStrategy.strategy.success (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:219:18)
    at done (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:115:41)
    at JwtStrategy.jwtVerify [as _verify] (/home/manuel/Documents/github/node-express-boilerplate/src/config/passport.js:20:5)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:123:34
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:223:12
    at getSecret (/home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:90:14)
    at Object.<anonymous>.module.exports [as verify] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:94:10)
    at Function.Object.<anonymous>.module.exports [as JwtVerifier] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/verify_jwt.js:4:16)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:104:25
    at JwtStrategy._secretOrKeyProvider (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:40:13)
    at JwtStrategy.Object.<anonymous>.JwtStrategy.authenticate (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:99:10)
    at attempt (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:366:16)
    at authenticate (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:367:7)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:25:5
    at new Promise (<anonymous>)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:24:10
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:137:13)
    at Route.dispatch (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:112:3)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:281:22
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:174:3)
    at router (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:174:3)
    at router (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at initialize (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/initialize.js:53:5)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at cors (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:188:7)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:224:17
    at originCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:214:15)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:219:13
    at optionsCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:199:9)
    at corsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:204:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at compression (/home/manuel/Documents/github/node-express-boilerplate/node_modules/compression/index.js:220:5)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express-mongo-sanitize/index.js:84:5
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/xss-clean/src/index.js:13:5
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at urlencodedParser (/home/manuel/Documents/github/node-express-boilerplate/node_modules/body-parser/lib/types/urlencoded.js:82:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/body-parser/lib/read.js:130:5
    at invokeCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/raw-body/index.js:224:16)
    at done (/home/manuel/Documents/github/node-express-boilerplate/node_modules/raw-body/index.js:213:7)
    at IncomingMessage.onEnd (/home/manuel/Documents/github/node-express-boilerplate/node_modules/raw-body/index.js:273:7)
    at IncomingMessage.emit (events.js:327:22)
    at endReadableNT (internal/streams/readable.js:1327:12)
    at processTicksAndRejections (internal/process/task_queues.js:80:21)]]></failure>
    </testCase>
    <testCase name="User routes POST /v1/users should return 400 error if email is invalid" duration="203">
      <failure message="TypeError: Cannot read property &apos;includes&apos; of undefined"><![CDATA[TypeError: Cannot read property 'includes' of undefined
    at every (/home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:14:82)
    at Array.every (<anonymous>)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:14:46
    at JwtStrategy.strategy.success (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:219:18)
    at done (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:115:41)
    at JwtStrategy.jwtVerify [as _verify] (/home/manuel/Documents/github/node-express-boilerplate/src/config/passport.js:20:5)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:123:34
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:223:12
    at getSecret (/home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:90:14)
    at Object.<anonymous>.module.exports [as verify] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:94:10)
    at Function.Object.<anonymous>.module.exports [as JwtVerifier] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/verify_jwt.js:4:16)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:104:25
    at JwtStrategy._secretOrKeyProvider (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:40:13)
    at JwtStrategy.Object.<anonymous>.JwtStrategy.authenticate (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:99:10)
    at attempt (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:366:16)
    at authenticate (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:367:7)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:25:5
    at new Promise (<anonymous>)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:24:10
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:137:13)
    at Route.dispatch (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:112:3)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:281:22
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:174:3)
    at router (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:174:3)
    at router (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at initialize (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/initialize.js:53:5)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at cors (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:188:7)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:224:17
    at originCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:214:15)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:219:13
    at optionsCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:199:9)
    at corsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:204:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at compression (/home/manuel/Documents/github/node-express-boilerplate/node_modules/compression/index.js:220:5)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express-mongo-sanitize/index.js:84:5
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/xss-clean/src/index.js:13:5
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at urlencodedParser (/home/manuel/Documents/github/node-express-boilerplate/node_modules/body-parser/lib/types/urlencoded.js:82:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/body-parser/lib/read.js:130:5
    at invokeCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/raw-body/index.js:224:16)
    at done (/home/manuel/Documents/github/node-express-boilerplate/node_modules/raw-body/index.js:213:7)
    at IncomingMessage.onEnd (/home/manuel/Documents/github/node-express-boilerplate/node_modules/raw-body/index.js:273:7)
    at IncomingMessage.emit (events.js:327:22)
    at endReadableNT (internal/streams/readable.js:1327:12)
    at processTicksAndRejections (internal/process/task_queues.js:80:21)]]></failure>
    </testCase>
    <testCase name="User routes POST /v1/users should return 400 error if email is already used" duration="207">
      <failure message="TypeError: Cannot read property &apos;includes&apos; of undefined"><![CDATA[TypeError: Cannot read property 'includes' of undefined
    at every (/home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:14:82)
    at Array.every (<anonymous>)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:14:46
    at JwtStrategy.strategy.success (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:219:18)
    at done (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:115:41)
    at JwtStrategy.jwtVerify [as _verify] (/home/manuel/Documents/github/node-express-boilerplate/src/config/passport.js:20:5)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:123:34
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:223:12
    at getSecret (/home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:90:14)
    at Object.<anonymous>.module.exports [as verify] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:94:10)
    at Function.Object.<anonymous>.module.exports [as JwtVerifier] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/verify_jwt.js:4:16)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:104:25
    at JwtStrategy._secretOrKeyProvider (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:40:13)
    at JwtStrategy.Object.<anonymous>.JwtStrategy.authenticate (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:99:10)
    at attempt (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:366:16)
    at authenticate (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:367:7)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:25:5
    at new Promise (<anonymous>)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:24:10
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:137:13)
    at Route.dispatch (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:112:3)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:281:22
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:174:3)
    at router (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:174:3)
    at router (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at initialize (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/initialize.js:53:5)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at cors (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:188:7)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:224:17
    at originCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:214:15)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:219:13
    at optionsCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:199:9)
    at corsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:204:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at compression (/home/manuel/Documents/github/node-express-boilerplate/node_modules/compression/index.js:220:5)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express-mongo-sanitize/index.js:84:5
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/xss-clean/src/index.js:13:5
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at urlencodedParser (/home/manuel/Documents/github/node-express-boilerplate/node_modules/body-parser/lib/types/urlencoded.js:82:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/body-parser/lib/read.js:130:5
    at invokeCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/raw-body/index.js:224:16)
    at done (/home/manuel/Documents/github/node-express-boilerplate/node_modules/raw-body/index.js:213:7)
    at IncomingMessage.onEnd (/home/manuel/Documents/github/node-express-boilerplate/node_modules/raw-body/index.js:273:7)
    at IncomingMessage.emit (events.js:327:22)
    at endReadableNT (internal/streams/readable.js:1327:12)
    at processTicksAndRejections (internal/process/task_queues.js:80:21)]]></failure>
    </testCase>
    <testCase name="User routes POST /v1/users should return 400 error if password length is less than 8 characters" duration="230">
      <failure message="TypeError: Cannot read property &apos;includes&apos; of undefined"><![CDATA[TypeError: Cannot read property 'includes' of undefined
    at every (/home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:14:82)
    at Array.every (<anonymous>)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:14:46
    at JwtStrategy.strategy.success (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:219:18)
    at done (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:115:41)
    at JwtStrategy.jwtVerify [as _verify] (/home/manuel/Documents/github/node-express-boilerplate/src/config/passport.js:20:5)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:123:34
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:223:12
    at getSecret (/home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:90:14)
    at Object.<anonymous>.module.exports [as verify] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:94:10)
    at Function.Object.<anonymous>.module.exports [as JwtVerifier] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/verify_jwt.js:4:16)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:104:25
    at JwtStrategy._secretOrKeyProvider (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:40:13)
    at JwtStrategy.Object.<anonymous>.JwtStrategy.authenticate (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:99:10)
    at attempt (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:366:16)
    at authenticate (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:367:7)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:25:5
    at new Promise (<anonymous>)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:24:10
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:137:13)
    at Route.dispatch (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:112:3)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:281:22
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:174:3)
    at router (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:174:3)
    at router (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at initialize (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/initialize.js:53:5)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at cors (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:188:7)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:224:17
    at originCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:214:15)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:219:13
    at optionsCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:199:9)
    at corsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:204:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at compression (/home/manuel/Documents/github/node-express-boilerplate/node_modules/compression/index.js:220:5)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express-mongo-sanitize/index.js:84:5
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/xss-clean/src/index.js:13:5
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at urlencodedParser (/home/manuel/Documents/github/node-express-boilerplate/node_modules/body-parser/lib/types/urlencoded.js:82:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/body-parser/lib/read.js:130:5
    at invokeCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/raw-body/index.js:224:16)
    at done (/home/manuel/Documents/github/node-express-boilerplate/node_modules/raw-body/index.js:213:7)
    at IncomingMessage.onEnd (/home/manuel/Documents/github/node-express-boilerplate/node_modules/raw-body/index.js:273:7)
    at IncomingMessage.emit (events.js:327:22)
    at endReadableNT (internal/streams/readable.js:1327:12)
    at processTicksAndRejections (internal/process/task_queues.js:80:21)]]></failure>
    </testCase>
    <testCase name="User routes POST /v1/users should return 400 error if password does not contain both letters and numbers" duration="214">
      <failure message="TypeError: Cannot read property &apos;includes&apos; of undefined"><![CDATA[TypeError: Cannot read property 'includes' of undefined
    at every (/home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:14:82)
    at Array.every (<anonymous>)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:14:46
    at JwtStrategy.strategy.success (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:219:18)
    at done (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:115:41)
    at JwtStrategy.jwtVerify [as _verify] (/home/manuel/Documents/github/node-express-boilerplate/src/config/passport.js:20:5)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:123:34
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:223:12
    at getSecret (/home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:90:14)
    at Object.<anonymous>.module.exports [as verify] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:94:10)
    at Function.Object.<anonymous>.module.exports [as JwtVerifier] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/verify_jwt.js:4:16)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:104:25
    at JwtStrategy._secretOrKeyProvider (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:40:13)
    at JwtStrategy.Object.<anonymous>.JwtStrategy.authenticate (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:99:10)
    at attempt (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:366:16)
    at authenticate (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:367:7)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:25:5
    at new Promise (<anonymous>)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:24:10
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:137:13)
    at Route.dispatch (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:112:3)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:281:22
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:174:3)
    at router (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:174:3)
    at router (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at initialize (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/initialize.js:53:5)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at cors (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:188:7)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:224:17
    at originCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:214:15)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:219:13
    at optionsCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:199:9)
    at corsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:204:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at compression (/home/manuel/Documents/github/node-express-boilerplate/node_modules/compression/index.js:220:5)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express-mongo-sanitize/index.js:84:5
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/xss-clean/src/index.js:13:5
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at urlencodedParser (/home/manuel/Documents/github/node-express-boilerplate/node_modules/body-parser/lib/types/urlencoded.js:82:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/body-parser/lib/read.js:130:5
    at invokeCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/raw-body/index.js:224:16)
    at done (/home/manuel/Documents/github/node-express-boilerplate/node_modules/raw-body/index.js:213:7)
    at IncomingMessage.onEnd (/home/manuel/Documents/github/node-express-boilerplate/node_modules/raw-body/index.js:273:7)
    at IncomingMessage.emit (events.js:327:22)
    at endReadableNT (internal/streams/readable.js:1327:12)
    at processTicksAndRejections (internal/process/task_queues.js:80:21)]]></failure>
    </testCase>
    <testCase name="User routes POST /v1/users should return 400 error if role is neither user nor admin" duration="214">
      <failure message="TypeError: Cannot read property &apos;includes&apos; of undefined"><![CDATA[TypeError: Cannot read property 'includes' of undefined
    at every (/home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:14:82)
    at Array.every (<anonymous>)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:14:46
    at JwtStrategy.strategy.success (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:219:18)
    at done (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:115:41)
    at JwtStrategy.jwtVerify [as _verify] (/home/manuel/Documents/github/node-express-boilerplate/src/config/passport.js:20:5)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:123:34
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:223:12
    at getSecret (/home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:90:14)
    at Object.<anonymous>.module.exports [as verify] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:94:10)
    at Function.Object.<anonymous>.module.exports [as JwtVerifier] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/verify_jwt.js:4:16)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:104:25
    at JwtStrategy._secretOrKeyProvider (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:40:13)
    at JwtStrategy.Object.<anonymous>.JwtStrategy.authenticate (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:99:10)
    at attempt (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:366:16)
    at authenticate (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:367:7)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:25:5
    at new Promise (<anonymous>)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:24:10
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:137:13)
    at Route.dispatch (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:112:3)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:281:22
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:174:3)
    at router (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:174:3)
    at router (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at initialize (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/initialize.js:53:5)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at cors (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:188:7)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:224:17
    at originCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:214:15)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:219:13
    at optionsCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:199:9)
    at corsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:204:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at compression (/home/manuel/Documents/github/node-express-boilerplate/node_modules/compression/index.js:220:5)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express-mongo-sanitize/index.js:84:5
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/xss-clean/src/index.js:13:5
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at urlencodedParser (/home/manuel/Documents/github/node-express-boilerplate/node_modules/body-parser/lib/types/urlencoded.js:82:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/body-parser/lib/read.js:130:5
    at invokeCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/raw-body/index.js:224:16)
    at done (/home/manuel/Documents/github/node-express-boilerplate/node_modules/raw-body/index.js:213:7)
    at IncomingMessage.onEnd (/home/manuel/Documents/github/node-express-boilerplate/node_modules/raw-body/index.js:273:7)
    at IncomingMessage.emit (events.js:327:22)
    at endReadableNT (internal/streams/readable.js:1327:12)
    at processTicksAndRejections (internal/process/task_queues.js:80:21)]]></failure>
    </testCase>
    <testCase name="User routes GET /v1/users should return 200 and apply the default query options" duration="225">
      <failure message="TypeError: Cannot read property &apos;includes&apos; of undefined"><![CDATA[TypeError: Cannot read property 'includes' of undefined
    at every (/home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:14:82)
    at Array.every (<anonymous>)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:14:46
    at JwtStrategy.strategy.success (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:219:18)
    at done (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:115:41)
    at JwtStrategy.jwtVerify [as _verify] (/home/manuel/Documents/github/node-express-boilerplate/src/config/passport.js:20:5)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:123:34
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:223:12
    at getSecret (/home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:90:14)
    at Object.<anonymous>.module.exports [as verify] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:94:10)
    at Function.Object.<anonymous>.module.exports [as JwtVerifier] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/verify_jwt.js:4:16)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:104:25
    at JwtStrategy._secretOrKeyProvider (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:40:13)
    at JwtStrategy.Object.<anonymous>.JwtStrategy.authenticate (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:99:10)
    at attempt (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:366:16)
    at authenticate (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:367:7)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:25:5
    at new Promise (<anonymous>)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:24:10
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:137:13)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at Route.dispatch (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:112:3)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:281:22
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:174:3)
    at router (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:174:3)
    at router (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at initialize (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/initialize.js:53:5)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at cors (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:188:7)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:224:17
    at originCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:214:15)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:219:13
    at optionsCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:199:9)
    at corsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:204:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at compression (/home/manuel/Documents/github/node-express-boilerplate/node_modules/compression/index.js:220:5)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express-mongo-sanitize/index.js:84:5
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/xss-clean/src/index.js:13:5
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at urlencodedParser (/home/manuel/Documents/github/node-express-boilerplate/node_modules/body-parser/lib/types/urlencoded.js:91:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at jsonParser (/home/manuel/Documents/github/node-express-boilerplate/node_modules/body-parser/lib/types/json.js:110:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:142:6)
    at xXssProtectionMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-xss-protection/index.js:6:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at referrerPolicyMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/referrer-policy/index.js:24:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at xPermittedCrossDomainPoliciesMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-permitted-cross-domain-policies/index.js:15:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at xContentTypeOptionsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-content-type-options/index.js:6:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at xDownloadOptionsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-download-options/index.js:6:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at strictTransportSecurityMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/strict-transport-security/index.js:34:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at xPoweredByMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-powered-by/index.js:6:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at xFrameOptionsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-frame-options/index.js:21:3)]]></failure>
    </testCase>
    <testCase name="User routes GET /v1/users should return 401 if access token is missing" duration="218">
      <failure message="BulkWriteError: E11000 duplicate key error collection: test-test.users index: email_1 dup key: { email: &quot;mafalda_lang37@gmail.com&quot; }"><![CDATA[BulkWriteError: E11000 duplicate key error collection: test-test.users index: email_1 dup key: { email: "mafalda_lang37@gmail.com" }
    at OrderedBulkOperation.handleWriteError (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/bulk/common.js:1258:9)
    at resultHandler (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/bulk/common.js:521:23)
    at handler (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/core/sdam/topology.js:944:24)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/cmap/connection_pool.js:350:13
    at handleOperationResult (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/core/sdam/server.js:558:5)
    at MessageStream.messageHandler (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/cmap/connection.js:277:5)
    at MessageStream.emit (events.js:315:20)
    at processIncomingData (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/cmap/message_stream.js:144:12)
    at MessageStream._write (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/cmap/message_stream.js:42:5)
    at writeOrBuffer (internal/streams/writable.js:358:12)
    at MessageStream.Writable.write (internal/streams/writable.js:303:10)
    at TLSSocket.ondata (internal/streams/readable.js:719:22)
    at TLSSocket.emit (events.js:315:20)
    at addChunk (internal/streams/readable.js:309:12)
    at readableAddChunk (internal/streams/readable.js:284:9)
    at TLSSocket.Readable.push (internal/streams/readable.js:223:10)
    at TLSWrap.onStreamRead (internal/stream_base_commons.js:188:23)]]></failure>
    </testCase>
    <testCase name="User routes GET /v1/users should return 403 if a non-admin is trying to access all users" duration="202">
      <failure message="TypeError: Cannot read property &apos;includes&apos; of undefined"><![CDATA[TypeError: Cannot read property 'includes' of undefined
    at every (/home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:14:82)
    at Array.every (<anonymous>)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:14:46
    at JwtStrategy.strategy.success (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:219:18)
    at done (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:115:41)
    at JwtStrategy.jwtVerify [as _verify] (/home/manuel/Documents/github/node-express-boilerplate/src/config/passport.js:20:5)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:123:34
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:223:12
    at getSecret (/home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:90:14)
    at Object.<anonymous>.module.exports [as verify] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:94:10)
    at Function.Object.<anonymous>.module.exports [as JwtVerifier] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/verify_jwt.js:4:16)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:104:25
    at JwtStrategy._secretOrKeyProvider (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:40:13)
    at JwtStrategy.Object.<anonymous>.JwtStrategy.authenticate (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:99:10)
    at attempt (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:366:16)
    at authenticate (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:367:7)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:25:5
    at new Promise (<anonymous>)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:24:10
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:137:13)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at Route.dispatch (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:112:3)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:281:22
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:174:3)
    at router (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:174:3)
    at router (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at initialize (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/initialize.js:53:5)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at cors (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:188:7)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:224:17
    at originCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:214:15)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:219:13
    at optionsCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:199:9)
    at corsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:204:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at compression (/home/manuel/Documents/github/node-express-boilerplate/node_modules/compression/index.js:220:5)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express-mongo-sanitize/index.js:84:5
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/xss-clean/src/index.js:13:5
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at urlencodedParser (/home/manuel/Documents/github/node-express-boilerplate/node_modules/body-parser/lib/types/urlencoded.js:91:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at jsonParser (/home/manuel/Documents/github/node-express-boilerplate/node_modules/body-parser/lib/types/json.js:110:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:142:6)
    at xXssProtectionMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-xss-protection/index.js:6:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at referrerPolicyMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/referrer-policy/index.js:24:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at xPermittedCrossDomainPoliciesMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-permitted-cross-domain-policies/index.js:15:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at xContentTypeOptionsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-content-type-options/index.js:6:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at xDownloadOptionsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-download-options/index.js:6:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at strictTransportSecurityMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/strict-transport-security/index.js:34:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at xPoweredByMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-powered-by/index.js:6:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at xFrameOptionsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-frame-options/index.js:21:3)]]></failure>
    </testCase>
    <testCase name="User routes GET /v1/users should correctly apply filter on name field" duration="205">
      <failure message="TypeError: Cannot read property &apos;includes&apos; of undefined"><![CDATA[TypeError: Cannot read property 'includes' of undefined
    at every (/home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:14:82)
    at Array.every (<anonymous>)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:14:46
    at JwtStrategy.strategy.success (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:219:18)
    at done (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:115:41)
    at JwtStrategy.jwtVerify [as _verify] (/home/manuel/Documents/github/node-express-boilerplate/src/config/passport.js:20:5)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:123:34
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:223:12
    at getSecret (/home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:90:14)
    at Object.<anonymous>.module.exports [as verify] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:94:10)
    at Function.Object.<anonymous>.module.exports [as JwtVerifier] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/verify_jwt.js:4:16)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:104:25
    at JwtStrategy._secretOrKeyProvider (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:40:13)
    at JwtStrategy.Object.<anonymous>.JwtStrategy.authenticate (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:99:10)
    at attempt (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:366:16)
    at authenticate (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:367:7)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:25:5
    at new Promise (<anonymous>)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:24:10
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:137:13)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at Route.dispatch (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:112:3)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:281:22
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:174:3)
    at router (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:174:3)
    at router (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at initialize (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/initialize.js:53:5)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at cors (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:188:7)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:224:17
    at originCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:214:15)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:219:13
    at optionsCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:199:9)
    at corsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:204:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at compression (/home/manuel/Documents/github/node-express-boilerplate/node_modules/compression/index.js:220:5)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express-mongo-sanitize/index.js:84:5
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/xss-clean/src/index.js:13:5
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at urlencodedParser (/home/manuel/Documents/github/node-express-boilerplate/node_modules/body-parser/lib/types/urlencoded.js:91:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at jsonParser (/home/manuel/Documents/github/node-express-boilerplate/node_modules/body-parser/lib/types/json.js:110:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:142:6)
    at xXssProtectionMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-xss-protection/index.js:6:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at referrerPolicyMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/referrer-policy/index.js:24:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at xPermittedCrossDomainPoliciesMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-permitted-cross-domain-policies/index.js:15:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at xContentTypeOptionsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-content-type-options/index.js:6:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at xDownloadOptionsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-download-options/index.js:6:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at strictTransportSecurityMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/strict-transport-security/index.js:34:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at xPoweredByMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-powered-by/index.js:6:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at xFrameOptionsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-frame-options/index.js:21:3)]]></failure>
    </testCase>
    <testCase name="User routes GET /v1/users should correctly apply filter on role field" duration="213">
      <failure message="TypeError: Cannot read property &apos;includes&apos; of undefined"><![CDATA[TypeError: Cannot read property 'includes' of undefined
    at every (/home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:14:82)
    at Array.every (<anonymous>)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:14:46
    at JwtStrategy.strategy.success (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:219:18)
    at done (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:115:41)
    at JwtStrategy.jwtVerify [as _verify] (/home/manuel/Documents/github/node-express-boilerplate/src/config/passport.js:20:5)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:123:34
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:223:12
    at getSecret (/home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:90:14)
    at Object.<anonymous>.module.exports [as verify] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:94:10)
    at Function.Object.<anonymous>.module.exports [as JwtVerifier] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/verify_jwt.js:4:16)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:104:25
    at JwtStrategy._secretOrKeyProvider (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:40:13)
    at JwtStrategy.Object.<anonymous>.JwtStrategy.authenticate (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:99:10)
    at attempt (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:366:16)
    at authenticate (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:367:7)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:25:5
    at new Promise (<anonymous>)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:24:10
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:137:13)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at Route.dispatch (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:112:3)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:281:22
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:174:3)
    at router (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:174:3)
    at router (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at initialize (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/initialize.js:53:5)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at cors (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:188:7)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:224:17
    at originCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:214:15)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:219:13
    at optionsCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:199:9)
    at corsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:204:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at compression (/home/manuel/Documents/github/node-express-boilerplate/node_modules/compression/index.js:220:5)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express-mongo-sanitize/index.js:84:5
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/xss-clean/src/index.js:13:5
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at urlencodedParser (/home/manuel/Documents/github/node-express-boilerplate/node_modules/body-parser/lib/types/urlencoded.js:91:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at jsonParser (/home/manuel/Documents/github/node-express-boilerplate/node_modules/body-parser/lib/types/json.js:110:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:142:6)
    at xXssProtectionMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-xss-protection/index.js:6:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at referrerPolicyMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/referrer-policy/index.js:24:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at xPermittedCrossDomainPoliciesMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-permitted-cross-domain-policies/index.js:15:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at xContentTypeOptionsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-content-type-options/index.js:6:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at xDownloadOptionsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-download-options/index.js:6:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at strictTransportSecurityMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/strict-transport-security/index.js:34:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at xPoweredByMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-powered-by/index.js:6:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at xFrameOptionsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-frame-options/index.js:21:3)]]></failure>
    </testCase>
    <testCase name="User routes GET /v1/users should correctly sort the returned array if descending sort param is specified" duration="203">
      <failure message="BulkWriteError: E11000 duplicate key error collection: test-test.users index: email_1 dup key: { email: &quot;mafalda_lang37@gmail.com&quot; }"><![CDATA[BulkWriteError: E11000 duplicate key error collection: test-test.users index: email_1 dup key: { email: "mafalda_lang37@gmail.com" }
    at OrderedBulkOperation.handleWriteError (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/bulk/common.js:1258:9)
    at resultHandler (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/bulk/common.js:521:23)
    at handler (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/core/sdam/topology.js:944:24)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/cmap/connection_pool.js:350:13
    at handleOperationResult (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/core/sdam/server.js:558:5)
    at MessageStream.messageHandler (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/cmap/connection.js:277:5)
    at MessageStream.emit (events.js:315:20)
    at processIncomingData (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/cmap/message_stream.js:144:12)
    at MessageStream._write (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/cmap/message_stream.js:42:5)
    at writeOrBuffer (internal/streams/writable.js:358:12)
    at MessageStream.Writable.write (internal/streams/writable.js:303:10)
    at TLSSocket.ondata (internal/streams/readable.js:719:22)
    at TLSSocket.emit (events.js:315:20)
    at addChunk (internal/streams/readable.js:309:12)
    at readableAddChunk (internal/streams/readable.js:284:9)
    at TLSSocket.Readable.push (internal/streams/readable.js:223:10)
    at TLSWrap.onStreamRead (internal/stream_base_commons.js:188:23)]]></failure>
    </testCase>
    <testCase name="User routes GET /v1/users should correctly sort the returned array if ascending sort param is specified" duration="240">
      <failure message="TypeError: Cannot read property &apos;includes&apos; of undefined"><![CDATA[TypeError: Cannot read property 'includes' of undefined
    at every (/home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:14:82)
    at Array.every (<anonymous>)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:14:46
    at JwtStrategy.strategy.success (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:219:18)
    at done (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:115:41)
    at JwtStrategy.jwtVerify [as _verify] (/home/manuel/Documents/github/node-express-boilerplate/src/config/passport.js:20:5)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:123:34
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:223:12
    at getSecret (/home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:90:14)
    at Object.<anonymous>.module.exports [as verify] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:94:10)
    at Function.Object.<anonymous>.module.exports [as JwtVerifier] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/verify_jwt.js:4:16)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:104:25
    at JwtStrategy._secretOrKeyProvider (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:40:13)
    at JwtStrategy.Object.<anonymous>.JwtStrategy.authenticate (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:99:10)
    at attempt (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:366:16)
    at authenticate (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:367:7)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:25:5
    at new Promise (<anonymous>)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:24:10
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:137:13)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at Route.dispatch (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:112:3)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:281:22
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:174:3)
    at router (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:174:3)
    at router (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at initialize (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/initialize.js:53:5)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at cors (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:188:7)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:224:17
    at originCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:214:15)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:219:13
    at optionsCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:199:9)
    at corsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:204:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at compression (/home/manuel/Documents/github/node-express-boilerplate/node_modules/compression/index.js:220:5)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express-mongo-sanitize/index.js:84:5
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/xss-clean/src/index.js:13:5
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at urlencodedParser (/home/manuel/Documents/github/node-express-boilerplate/node_modules/body-parser/lib/types/urlencoded.js:91:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at jsonParser (/home/manuel/Documents/github/node-express-boilerplate/node_modules/body-parser/lib/types/json.js:110:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:142:6)
    at xXssProtectionMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-xss-protection/index.js:6:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at referrerPolicyMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/referrer-policy/index.js:24:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at xPermittedCrossDomainPoliciesMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-permitted-cross-domain-policies/index.js:15:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at xContentTypeOptionsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-content-type-options/index.js:6:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at xDownloadOptionsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-download-options/index.js:6:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at strictTransportSecurityMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/strict-transport-security/index.js:34:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at xPoweredByMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-powered-by/index.js:6:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at xFrameOptionsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-frame-options/index.js:21:3)]]></failure>
    </testCase>
    <testCase name="User routes GET /v1/users should correctly sort the returned array if multiple sorting criteria are specified" duration="201">
      <failure message="BulkWriteError: E11000 duplicate key error collection: test-test.users index: email_1 dup key: { email: &quot;mafalda_lang37@gmail.com&quot; }"><![CDATA[BulkWriteError: E11000 duplicate key error collection: test-test.users index: email_1 dup key: { email: "mafalda_lang37@gmail.com" }
    at OrderedBulkOperation.handleWriteError (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/bulk/common.js:1258:9)
    at resultHandler (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/bulk/common.js:521:23)
    at handler (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/core/sdam/topology.js:944:24)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/cmap/connection_pool.js:350:13
    at handleOperationResult (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/core/sdam/server.js:558:5)
    at MessageStream.messageHandler (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/cmap/connection.js:277:5)
    at MessageStream.emit (events.js:315:20)
    at processIncomingData (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/cmap/message_stream.js:144:12)
    at MessageStream._write (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/cmap/message_stream.js:42:5)
    at writeOrBuffer (internal/streams/writable.js:358:12)
    at MessageStream.Writable.write (internal/streams/writable.js:303:10)
    at TLSSocket.ondata (internal/streams/readable.js:719:22)
    at TLSSocket.emit (events.js:315:20)
    at addChunk (internal/streams/readable.js:309:12)
    at readableAddChunk (internal/streams/readable.js:284:9)
    at TLSSocket.Readable.push (internal/streams/readable.js:223:10)
    at TLSWrap.onStreamRead (internal/stream_base_commons.js:188:23)]]></failure>
    </testCase>
    <testCase name="User routes GET /v1/users should limit returned array if limit param is specified" duration="206">
      <failure message="TypeError: Cannot read property &apos;includes&apos; of undefined"><![CDATA[TypeError: Cannot read property 'includes' of undefined
    at every (/home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:14:82)
    at Array.every (<anonymous>)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:14:46
    at JwtStrategy.strategy.success (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:219:18)
    at done (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:115:41)
    at JwtStrategy.jwtVerify [as _verify] (/home/manuel/Documents/github/node-express-boilerplate/src/config/passport.js:20:5)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:123:34
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:223:12
    at getSecret (/home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:90:14)
    at Object.<anonymous>.module.exports [as verify] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:94:10)
    at Function.Object.<anonymous>.module.exports [as JwtVerifier] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/verify_jwt.js:4:16)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:104:25
    at JwtStrategy._secretOrKeyProvider (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:40:13)
    at JwtStrategy.Object.<anonymous>.JwtStrategy.authenticate (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:99:10)
    at attempt (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:366:16)
    at authenticate (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:367:7)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:25:5
    at new Promise (<anonymous>)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:24:10
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:137:13)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at Route.dispatch (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:112:3)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:281:22
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:174:3)
    at router (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:174:3)
    at router (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at initialize (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/initialize.js:53:5)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at cors (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:188:7)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:224:17
    at originCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:214:15)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:219:13
    at optionsCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:199:9)
    at corsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:204:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at compression (/home/manuel/Documents/github/node-express-boilerplate/node_modules/compression/index.js:220:5)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express-mongo-sanitize/index.js:84:5
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/xss-clean/src/index.js:13:5
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at urlencodedParser (/home/manuel/Documents/github/node-express-boilerplate/node_modules/body-parser/lib/types/urlencoded.js:91:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at jsonParser (/home/manuel/Documents/github/node-express-boilerplate/node_modules/body-parser/lib/types/json.js:110:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:142:6)
    at xXssProtectionMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-xss-protection/index.js:6:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at referrerPolicyMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/referrer-policy/index.js:24:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at xPermittedCrossDomainPoliciesMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-permitted-cross-domain-policies/index.js:15:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at xContentTypeOptionsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-content-type-options/index.js:6:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at xDownloadOptionsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-download-options/index.js:6:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at strictTransportSecurityMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/strict-transport-security/index.js:34:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at xPoweredByMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-powered-by/index.js:6:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at xFrameOptionsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-frame-options/index.js:21:3)]]></failure>
    </testCase>
    <testCase name="User routes GET /v1/users should return the correct page if page and limit params are specified" duration="244">
      <failure message="TypeError: Cannot read property &apos;includes&apos; of undefined"><![CDATA[TypeError: Cannot read property 'includes' of undefined
    at every (/home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:14:82)
    at Array.every (<anonymous>)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:14:46
    at JwtStrategy.strategy.success (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:219:18)
    at done (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:115:41)
    at JwtStrategy.jwtVerify [as _verify] (/home/manuel/Documents/github/node-express-boilerplate/src/config/passport.js:20:5)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:123:34
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:223:12
    at getSecret (/home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:90:14)
    at Object.<anonymous>.module.exports [as verify] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:94:10)
    at Function.Object.<anonymous>.module.exports [as JwtVerifier] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/verify_jwt.js:4:16)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:104:25
    at JwtStrategy._secretOrKeyProvider (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:40:13)
    at JwtStrategy.Object.<anonymous>.JwtStrategy.authenticate (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:99:10)
    at attempt (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:366:16)
    at authenticate (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:367:7)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:25:5
    at new Promise (<anonymous>)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:24:10
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:137:13)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at Route.dispatch (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:112:3)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:281:22
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:174:3)
    at router (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:174:3)
    at router (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at initialize (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/initialize.js:53:5)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at cors (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:188:7)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:224:17
    at originCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:214:15)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:219:13
    at optionsCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:199:9)
    at corsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:204:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at compression (/home/manuel/Documents/github/node-express-boilerplate/node_modules/compression/index.js:220:5)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express-mongo-sanitize/index.js:84:5
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/xss-clean/src/index.js:13:5
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at urlencodedParser (/home/manuel/Documents/github/node-express-boilerplate/node_modules/body-parser/lib/types/urlencoded.js:91:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at jsonParser (/home/manuel/Documents/github/node-express-boilerplate/node_modules/body-parser/lib/types/json.js:110:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:142:6)
    at xXssProtectionMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-xss-protection/index.js:6:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at referrerPolicyMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/referrer-policy/index.js:24:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at xPermittedCrossDomainPoliciesMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-permitted-cross-domain-policies/index.js:15:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at xContentTypeOptionsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-content-type-options/index.js:6:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at xDownloadOptionsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-download-options/index.js:6:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at strictTransportSecurityMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/strict-transport-security/index.js:34:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at xPoweredByMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-powered-by/index.js:6:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at xFrameOptionsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-frame-options/index.js:21:3)]]></failure>
    </testCase>
    <testCase name="User routes GET /v1/users/:userId should return 200 and the user object if data is ok" duration="187">
      <failure message="BulkWriteError: E11000 duplicate key error collection: test-test.users index: email_1 dup key: { email: &quot;mafalda_lang37@gmail.com&quot; }"><![CDATA[BulkWriteError: E11000 duplicate key error collection: test-test.users index: email_1 dup key: { email: "mafalda_lang37@gmail.com" }
    at OrderedBulkOperation.handleWriteError (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/bulk/common.js:1258:9)
    at resultHandler (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/bulk/common.js:521:23)
    at handler (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/core/sdam/topology.js:944:24)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/cmap/connection_pool.js:350:13
    at handleOperationResult (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/core/sdam/server.js:558:5)
    at MessageStream.messageHandler (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/cmap/connection.js:277:5)
    at MessageStream.emit (events.js:315:20)
    at processIncomingData (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/cmap/message_stream.js:144:12)
    at MessageStream._write (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/cmap/message_stream.js:42:5)
    at writeOrBuffer (internal/streams/writable.js:358:12)
    at MessageStream.Writable.write (internal/streams/writable.js:303:10)
    at TLSSocket.ondata (internal/streams/readable.js:719:22)
    at TLSSocket.emit (events.js:315:20)
    at addChunk (internal/streams/readable.js:309:12)
    at readableAddChunk (internal/streams/readable.js:284:9)
    at TLSSocket.Readable.push (internal/streams/readable.js:223:10)
    at TLSWrap.onStreamRead (internal/stream_base_commons.js:188:23)]]></failure>
    </testCase>
    <testCase name="User routes GET /v1/users/:userId should return 401 error if access token is missing" duration="200"/>
    <testCase name="User routes GET /v1/users/:userId should return 403 error if user is trying to get another user" duration="225">
      <failure message="BulkWriteError: E11000 duplicate key error collection: test-test.users index: email_1 dup key: { email: &quot;mafalda_lang37@gmail.com&quot; }"><![CDATA[BulkWriteError: E11000 duplicate key error collection: test-test.users index: email_1 dup key: { email: "mafalda_lang37@gmail.com" }
    at OrderedBulkOperation.handleWriteError (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/bulk/common.js:1258:9)
    at resultHandler (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/bulk/common.js:521:23)
    at handler (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/core/sdam/topology.js:944:24)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/cmap/connection_pool.js:350:13
    at handleOperationResult (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/core/sdam/server.js:558:5)
    at MessageStream.messageHandler (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/cmap/connection.js:277:5)
    at MessageStream.emit (events.js:315:20)
    at processIncomingData (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/cmap/message_stream.js:144:12)
    at MessageStream._write (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/cmap/message_stream.js:42:5)
    at writeOrBuffer (internal/streams/writable.js:358:12)
    at MessageStream.Writable.write (internal/streams/writable.js:303:10)
    at TLSSocket.ondata (internal/streams/readable.js:719:22)
    at TLSSocket.emit (events.js:315:20)
    at addChunk (internal/streams/readable.js:309:12)
    at readableAddChunk (internal/streams/readable.js:284:9)
    at TLSSocket.Readable.push (internal/streams/readable.js:223:10)
    at TLSWrap.onStreamRead (internal/stream_base_commons.js:188:23)]]></failure>
    </testCase>
    <testCase name="User routes GET /v1/users/:userId should return 200 and the user object if admin is trying to get another user" duration="205">
      <failure message="BulkWriteError: E11000 duplicate key error collection: test-test.users index: email_1 dup key: { email: &quot;mafalda_lang37@gmail.com&quot; }"><![CDATA[BulkWriteError: E11000 duplicate key error collection: test-test.users index: email_1 dup key: { email: "mafalda_lang37@gmail.com" }
    at OrderedBulkOperation.handleWriteError (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/bulk/common.js:1258:9)
    at resultHandler (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/bulk/common.js:521:23)
    at handler (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/core/sdam/topology.js:944:24)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/cmap/connection_pool.js:350:13
    at handleOperationResult (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/core/sdam/server.js:558:5)
    at MessageStream.messageHandler (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/cmap/connection.js:277:5)
    at MessageStream.emit (events.js:315:20)
    at processIncomingData (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/cmap/message_stream.js:144:12)
    at MessageStream._write (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/cmap/message_stream.js:42:5)
    at writeOrBuffer (internal/streams/writable.js:358:12)
    at MessageStream.Writable.write (internal/streams/writable.js:303:10)
    at TLSSocket.ondata (internal/streams/readable.js:719:22)
    at TLSSocket.emit (events.js:315:20)
    at addChunk (internal/streams/readable.js:309:12)
    at readableAddChunk (internal/streams/readable.js:284:9)
    at TLSSocket.Readable.push (internal/streams/readable.js:223:10)
    at TLSWrap.onStreamRead (internal/stream_base_commons.js:188:23)]]></failure>
    </testCase>
    <testCase name="User routes GET /v1/users/:userId should return 400 error if userId is not a valid mongo id" duration="210">
      <failure message="TypeError: Cannot read property &apos;includes&apos; of undefined"><![CDATA[TypeError: Cannot read property 'includes' of undefined
    at every (/home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:14:82)
    at Array.every (<anonymous>)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:14:46
    at JwtStrategy.strategy.success (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:219:18)
    at done (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:115:41)
    at JwtStrategy.jwtVerify [as _verify] (/home/manuel/Documents/github/node-express-boilerplate/src/config/passport.js:20:5)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:123:34
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:223:12
    at getSecret (/home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:90:14)
    at Object.<anonymous>.module.exports [as verify] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:94:10)
    at Function.Object.<anonymous>.module.exports [as JwtVerifier] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/verify_jwt.js:4:16)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:104:25
    at JwtStrategy._secretOrKeyProvider (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:40:13)
    at JwtStrategy.Object.<anonymous>.JwtStrategy.authenticate (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:99:10)
    at attempt (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:366:16)
    at authenticate (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:367:7)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:25:5
    at new Promise (<anonymous>)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:24:10
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:137:13)
    at Route.dispatch (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:112:3)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:281:22
    at param (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:354:14)
    at param (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:365:14)
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:410:3)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:174:3)
    at router (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:174:3)
    at router (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at initialize (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/initialize.js:53:5)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at cors (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:188:7)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:224:17
    at originCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:214:15)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:219:13
    at optionsCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:199:9)
    at corsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:204:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at compression (/home/manuel/Documents/github/node-express-boilerplate/node_modules/compression/index.js:220:5)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express-mongo-sanitize/index.js:84:5
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/xss-clean/src/index.js:13:5
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at urlencodedParser (/home/manuel/Documents/github/node-express-boilerplate/node_modules/body-parser/lib/types/urlencoded.js:91:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at jsonParser (/home/manuel/Documents/github/node-express-boilerplate/node_modules/body-parser/lib/types/json.js:110:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:142:6)
    at xXssProtectionMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-xss-protection/index.js:6:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at referrerPolicyMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/referrer-policy/index.js:24:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at xPermittedCrossDomainPoliciesMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-permitted-cross-domain-policies/index.js:15:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at xContentTypeOptionsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-content-type-options/index.js:6:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at xDownloadOptionsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-download-options/index.js:6:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at strictTransportSecurityMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/strict-transport-security/index.js:34:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at xPoweredByMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-powered-by/index.js:6:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at xFrameOptionsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-frame-options/index.js:21:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)]]></failure>
    </testCase>
    <testCase name="User routes GET /v1/users/:userId should return 404 error if user is not found" duration="202">
      <failure message="TypeError: Cannot read property &apos;includes&apos; of undefined"><![CDATA[TypeError: Cannot read property 'includes' of undefined
    at every (/home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:14:82)
    at Array.every (<anonymous>)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:14:46
    at JwtStrategy.strategy.success (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:219:18)
    at done (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:115:41)
    at JwtStrategy.jwtVerify [as _verify] (/home/manuel/Documents/github/node-express-boilerplate/src/config/passport.js:20:5)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:123:34
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:223:12
    at getSecret (/home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:90:14)
    at Object.<anonymous>.module.exports [as verify] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:94:10)
    at Function.Object.<anonymous>.module.exports [as JwtVerifier] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/verify_jwt.js:4:16)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:104:25
    at JwtStrategy._secretOrKeyProvider (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:40:13)
    at JwtStrategy.Object.<anonymous>.JwtStrategy.authenticate (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:99:10)
    at attempt (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:366:16)
    at authenticate (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:367:7)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:25:5
    at new Promise (<anonymous>)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:24:10
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:137:13)
    at Route.dispatch (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:112:3)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:281:22
    at param (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:354:14)
    at param (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:365:14)
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:410:3)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:174:3)
    at router (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:174:3)
    at router (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at initialize (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/initialize.js:53:5)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at cors (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:188:7)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:224:17
    at originCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:214:15)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:219:13
    at optionsCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:199:9)
    at corsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:204:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at compression (/home/manuel/Documents/github/node-express-boilerplate/node_modules/compression/index.js:220:5)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express-mongo-sanitize/index.js:84:5
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/xss-clean/src/index.js:13:5
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at urlencodedParser (/home/manuel/Documents/github/node-express-boilerplate/node_modules/body-parser/lib/types/urlencoded.js:91:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at jsonParser (/home/manuel/Documents/github/node-express-boilerplate/node_modules/body-parser/lib/types/json.js:110:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:142:6)
    at xXssProtectionMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-xss-protection/index.js:6:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at referrerPolicyMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/referrer-policy/index.js:24:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at xPermittedCrossDomainPoliciesMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-permitted-cross-domain-policies/index.js:15:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at xContentTypeOptionsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-content-type-options/index.js:6:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at xDownloadOptionsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-download-options/index.js:6:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at strictTransportSecurityMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/strict-transport-security/index.js:34:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at xPoweredByMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-powered-by/index.js:6:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at xFrameOptionsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-frame-options/index.js:21:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)]]></failure>
    </testCase>
    <testCase name="User routes DELETE /v1/users/:userId should return 204 if data is ok" duration="184">
      <failure message="TypeError: Cannot read property &apos;includes&apos; of undefined"><![CDATA[TypeError: Cannot read property 'includes' of undefined
    at every (/home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:14:82)
    at Array.every (<anonymous>)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:14:46
    at JwtStrategy.strategy.success (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:219:18)
    at done (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:115:41)
    at JwtStrategy.jwtVerify [as _verify] (/home/manuel/Documents/github/node-express-boilerplate/src/config/passport.js:20:5)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:123:34
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:223:12
    at getSecret (/home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:90:14)
    at Object.<anonymous>.module.exports [as verify] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:94:10)
    at Function.Object.<anonymous>.module.exports [as JwtVerifier] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/verify_jwt.js:4:16)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:104:25
    at JwtStrategy._secretOrKeyProvider (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:40:13)
    at JwtStrategy.Object.<anonymous>.JwtStrategy.authenticate (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:99:10)
    at attempt (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:366:16)
    at authenticate (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:367:7)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:25:5
    at new Promise (<anonymous>)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:24:10
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:137:13)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at Route.dispatch (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:112:3)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:281:22
    at param (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:354:14)
    at param (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:365:14)
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:410:3)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:174:3)
    at router (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:174:3)
    at router (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at initialize (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/initialize.js:53:5)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at cors (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:188:7)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:224:17
    at originCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:214:15)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:219:13
    at optionsCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:199:9)
    at corsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:204:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at compression (/home/manuel/Documents/github/node-express-boilerplate/node_modules/compression/index.js:220:5)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express-mongo-sanitize/index.js:84:5
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/xss-clean/src/index.js:13:5
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at urlencodedParser (/home/manuel/Documents/github/node-express-boilerplate/node_modules/body-parser/lib/types/urlencoded.js:91:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at jsonParser (/home/manuel/Documents/github/node-express-boilerplate/node_modules/body-parser/lib/types/json.js:110:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:142:6)
    at xXssProtectionMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-xss-protection/index.js:6:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at referrerPolicyMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/referrer-policy/index.js:24:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at xPermittedCrossDomainPoliciesMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-permitted-cross-domain-policies/index.js:15:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at xContentTypeOptionsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-content-type-options/index.js:6:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at xDownloadOptionsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-download-options/index.js:6:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)]]></failure>
    </testCase>
    <testCase name="User routes DELETE /v1/users/:userId should return 401 error if access token is missing" duration="196"/>
    <testCase name="User routes DELETE /v1/users/:userId should return 403 error if user is trying to delete another user" duration="203">
      <failure message="TypeError: Cannot read property &apos;includes&apos; of undefined"><![CDATA[TypeError: Cannot read property 'includes' of undefined
    at every (/home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:14:82)
    at Array.every (<anonymous>)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:14:46
    at JwtStrategy.strategy.success (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:219:18)
    at done (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:115:41)
    at JwtStrategy.jwtVerify [as _verify] (/home/manuel/Documents/github/node-express-boilerplate/src/config/passport.js:20:5)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:123:34
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:223:12
    at getSecret (/home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:90:14)
    at Object.<anonymous>.module.exports [as verify] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:94:10)
    at Function.Object.<anonymous>.module.exports [as JwtVerifier] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/verify_jwt.js:4:16)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:104:25
    at JwtStrategy._secretOrKeyProvider (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:40:13)
    at JwtStrategy.Object.<anonymous>.JwtStrategy.authenticate (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:99:10)
    at attempt (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:366:16)
    at authenticate (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:367:7)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:25:5
    at new Promise (<anonymous>)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:24:10
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:137:13)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at Route.dispatch (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:112:3)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:281:22
    at param (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:354:14)
    at param (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:365:14)
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:410:3)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:174:3)
    at router (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:174:3)
    at router (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at initialize (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/initialize.js:53:5)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at cors (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:188:7)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:224:17
    at originCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:214:15)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:219:13
    at optionsCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:199:9)
    at corsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:204:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at compression (/home/manuel/Documents/github/node-express-boilerplate/node_modules/compression/index.js:220:5)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express-mongo-sanitize/index.js:84:5
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/xss-clean/src/index.js:13:5
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at urlencodedParser (/home/manuel/Documents/github/node-express-boilerplate/node_modules/body-parser/lib/types/urlencoded.js:91:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at jsonParser (/home/manuel/Documents/github/node-express-boilerplate/node_modules/body-parser/lib/types/json.js:110:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:142:6)
    at xXssProtectionMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-xss-protection/index.js:6:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at referrerPolicyMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/referrer-policy/index.js:24:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at xPermittedCrossDomainPoliciesMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-permitted-cross-domain-policies/index.js:15:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at xContentTypeOptionsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-content-type-options/index.js:6:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at xDownloadOptionsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-download-options/index.js:6:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)]]></failure>
    </testCase>
    <testCase name="User routes DELETE /v1/users/:userId should return 204 if admin is trying to delete another user" duration="205">
      <failure message="TypeError: Cannot read property &apos;includes&apos; of undefined"><![CDATA[TypeError: Cannot read property 'includes' of undefined
    at every (/home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:14:82)
    at Array.every (<anonymous>)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:14:46
    at JwtStrategy.strategy.success (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:219:18)
    at done (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:115:41)
    at JwtStrategy.jwtVerify [as _verify] (/home/manuel/Documents/github/node-express-boilerplate/src/config/passport.js:20:5)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:123:34
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:223:12
    at getSecret (/home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:90:14)
    at Object.<anonymous>.module.exports [as verify] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:94:10)
    at Function.Object.<anonymous>.module.exports [as JwtVerifier] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/verify_jwt.js:4:16)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:104:25
    at JwtStrategy._secretOrKeyProvider (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:40:13)
    at JwtStrategy.Object.<anonymous>.JwtStrategy.authenticate (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:99:10)
    at attempt (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:366:16)
    at authenticate (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:367:7)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:25:5
    at new Promise (<anonymous>)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:24:10
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:137:13)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at Route.dispatch (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:112:3)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:281:22
    at param (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:354:14)
    at param (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:365:14)
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:410:3)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:174:3)
    at router (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:174:3)
    at router (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at initialize (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/initialize.js:53:5)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at cors (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:188:7)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:224:17
    at originCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:214:15)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:219:13
    at optionsCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:199:9)
    at corsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:204:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at compression (/home/manuel/Documents/github/node-express-boilerplate/node_modules/compression/index.js:220:5)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express-mongo-sanitize/index.js:84:5
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/xss-clean/src/index.js:13:5
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at urlencodedParser (/home/manuel/Documents/github/node-express-boilerplate/node_modules/body-parser/lib/types/urlencoded.js:91:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at jsonParser (/home/manuel/Documents/github/node-express-boilerplate/node_modules/body-parser/lib/types/json.js:110:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:142:6)
    at xXssProtectionMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-xss-protection/index.js:6:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at referrerPolicyMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/referrer-policy/index.js:24:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at xPermittedCrossDomainPoliciesMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-permitted-cross-domain-policies/index.js:15:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at xContentTypeOptionsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-content-type-options/index.js:6:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at xDownloadOptionsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-download-options/index.js:6:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)]]></failure>
    </testCase>
    <testCase name="User routes DELETE /v1/users/:userId should return 400 error if userId is not a valid mongo id" duration="196">
      <failure message="TypeError: Cannot read property &apos;includes&apos; of undefined"><![CDATA[TypeError: Cannot read property 'includes' of undefined
    at every (/home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:14:82)
    at Array.every (<anonymous>)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:14:46
    at JwtStrategy.strategy.success (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:219:18)
    at done (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:115:41)
    at JwtStrategy.jwtVerify [as _verify] (/home/manuel/Documents/github/node-express-boilerplate/src/config/passport.js:20:5)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:123:34
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:223:12
    at getSecret (/home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:90:14)
    at Object.<anonymous>.module.exports [as verify] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:94:10)
    at Function.Object.<anonymous>.module.exports [as JwtVerifier] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/verify_jwt.js:4:16)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:104:25
    at JwtStrategy._secretOrKeyProvider (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:40:13)
    at JwtStrategy.Object.<anonymous>.JwtStrategy.authenticate (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:99:10)
    at attempt (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:366:16)
    at authenticate (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:367:7)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:25:5
    at new Promise (<anonymous>)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:24:10
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:137:13)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at Route.dispatch (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:112:3)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:281:22
    at param (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:354:14)
    at param (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:365:14)
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:410:3)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:174:3)
    at router (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:174:3)
    at router (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at initialize (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/initialize.js:53:5)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at cors (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:188:7)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:224:17
    at originCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:214:15)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:219:13
    at optionsCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:199:9)
    at corsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:204:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at compression (/home/manuel/Documents/github/node-express-boilerplate/node_modules/compression/index.js:220:5)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express-mongo-sanitize/index.js:84:5
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/xss-clean/src/index.js:13:5
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at urlencodedParser (/home/manuel/Documents/github/node-express-boilerplate/node_modules/body-parser/lib/types/urlencoded.js:91:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at jsonParser (/home/manuel/Documents/github/node-express-boilerplate/node_modules/body-parser/lib/types/json.js:110:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:142:6)
    at xXssProtectionMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-xss-protection/index.js:6:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at referrerPolicyMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/referrer-policy/index.js:24:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at xPermittedCrossDomainPoliciesMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-permitted-cross-domain-policies/index.js:15:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at xContentTypeOptionsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-content-type-options/index.js:6:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at xDownloadOptionsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-download-options/index.js:6:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)]]></failure>
    </testCase>
    <testCase name="User routes DELETE /v1/users/:userId should return 404 error if user already is not found" duration="207">
      <failure message="TypeError: Cannot read property &apos;includes&apos; of undefined"><![CDATA[TypeError: Cannot read property 'includes' of undefined
    at every (/home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:14:82)
    at Array.every (<anonymous>)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:14:46
    at JwtStrategy.strategy.success (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:219:18)
    at done (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:115:41)
    at JwtStrategy.jwtVerify [as _verify] (/home/manuel/Documents/github/node-express-boilerplate/src/config/passport.js:20:5)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:123:34
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:223:12
    at getSecret (/home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:90:14)
    at Object.<anonymous>.module.exports [as verify] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:94:10)
    at Function.Object.<anonymous>.module.exports [as JwtVerifier] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/verify_jwt.js:4:16)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:104:25
    at JwtStrategy._secretOrKeyProvider (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:40:13)
    at JwtStrategy.Object.<anonymous>.JwtStrategy.authenticate (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:99:10)
    at attempt (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:366:16)
    at authenticate (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:367:7)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:25:5
    at new Promise (<anonymous>)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:24:10
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:137:13)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at Route.dispatch (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:112:3)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:281:22
    at param (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:354:14)
    at param (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:365:14)
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:410:3)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:174:3)
    at router (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:174:3)
    at router (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at initialize (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/initialize.js:53:5)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at cors (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:188:7)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:224:17
    at originCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:214:15)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:219:13
    at optionsCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:199:9)
    at corsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:204:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at compression (/home/manuel/Documents/github/node-express-boilerplate/node_modules/compression/index.js:220:5)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express-mongo-sanitize/index.js:84:5
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/xss-clean/src/index.js:13:5
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at urlencodedParser (/home/manuel/Documents/github/node-express-boilerplate/node_modules/body-parser/lib/types/urlencoded.js:91:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at jsonParser (/home/manuel/Documents/github/node-express-boilerplate/node_modules/body-parser/lib/types/json.js:110:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:142:6)
    at xXssProtectionMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-xss-protection/index.js:6:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at referrerPolicyMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/referrer-policy/index.js:24:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at xPermittedCrossDomainPoliciesMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-permitted-cross-domain-policies/index.js:15:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at xContentTypeOptionsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-content-type-options/index.js:6:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)
    at xDownloadOptionsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/middlewares/x-download-options/index.js:6:3)
    at internalNext (/home/manuel/Documents/github/node-express-boilerplate/node_modules/helmet/dist/index.js:145:6)]]></failure>
    </testCase>
    <testCase name="User routes PATCH /v1/users/:userId should return 200 and successfully update user if data is ok" duration="199">
      <failure message="TypeError: Cannot read property &apos;includes&apos; of undefined"><![CDATA[TypeError: Cannot read property 'includes' of undefined
    at every (/home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:14:82)
    at Array.every (<anonymous>)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:14:46
    at JwtStrategy.strategy.success (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:219:18)
    at done (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:115:41)
    at JwtStrategy.jwtVerify [as _verify] (/home/manuel/Documents/github/node-express-boilerplate/src/config/passport.js:20:5)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:123:34
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:223:12
    at getSecret (/home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:90:14)
    at Object.<anonymous>.module.exports [as verify] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:94:10)
    at Function.Object.<anonymous>.module.exports [as JwtVerifier] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/verify_jwt.js:4:16)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:104:25
    at JwtStrategy._secretOrKeyProvider (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:40:13)
    at JwtStrategy.Object.<anonymous>.JwtStrategy.authenticate (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:99:10)
    at attempt (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:366:16)
    at authenticate (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:367:7)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:25:5
    at new Promise (<anonymous>)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:24:10
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:137:13)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at Route.dispatch (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:112:3)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:281:22
    at param (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:354:14)
    at param (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:365:14)
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:410:3)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:174:3)
    at router (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:174:3)
    at router (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at initialize (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/initialize.js:53:5)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at cors (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:188:7)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:224:17
    at originCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:214:15)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:219:13
    at optionsCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:199:9)
    at corsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:204:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at compression (/home/manuel/Documents/github/node-express-boilerplate/node_modules/compression/index.js:220:5)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express-mongo-sanitize/index.js:84:5
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/xss-clean/src/index.js:13:5
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at urlencodedParser (/home/manuel/Documents/github/node-express-boilerplate/node_modules/body-parser/lib/types/urlencoded.js:82:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/body-parser/lib/read.js:130:5
    at invokeCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/raw-body/index.js:224:16)
    at done (/home/manuel/Documents/github/node-express-boilerplate/node_modules/raw-body/index.js:213:7)
    at IncomingMessage.onEnd (/home/manuel/Documents/github/node-express-boilerplate/node_modules/raw-body/index.js:273:7)
    at IncomingMessage.emit (events.js:327:22)
    at endReadableNT (internal/streams/readable.js:1327:12)
    at processTicksAndRejections (internal/process/task_queues.js:80:21)]]></failure>
    </testCase>
    <testCase name="User routes PATCH /v1/users/:userId should return 401 error if access token is missing" duration="213"/>
    <testCase name="User routes PATCH /v1/users/:userId should return 403 if user is updating another user" duration="204">
      <failure message="BulkWriteError: E11000 duplicate key error collection: test-test.users index: email_1 dup key: { email: &quot;mafalda_lang37@gmail.com&quot; }"><![CDATA[BulkWriteError: E11000 duplicate key error collection: test-test.users index: email_1 dup key: { email: "mafalda_lang37@gmail.com" }
    at OrderedBulkOperation.handleWriteError (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/bulk/common.js:1258:9)
    at resultHandler (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/bulk/common.js:521:23)
    at handler (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/core/sdam/topology.js:944:24)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/cmap/connection_pool.js:350:13
    at handleOperationResult (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/core/sdam/server.js:558:5)
    at MessageStream.messageHandler (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/cmap/connection.js:277:5)
    at MessageStream.emit (events.js:315:20)
    at processIncomingData (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/cmap/message_stream.js:144:12)
    at MessageStream._write (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/cmap/message_stream.js:42:5)
    at writeOrBuffer (internal/streams/writable.js:358:12)
    at MessageStream.Writable.write (internal/streams/writable.js:303:10)
    at TLSSocket.ondata (internal/streams/readable.js:719:22)
    at TLSSocket.emit (events.js:315:20)
    at addChunk (internal/streams/readable.js:309:12)
    at readableAddChunk (internal/streams/readable.js:284:9)
    at TLSSocket.Readable.push (internal/streams/readable.js:223:10)
    at TLSWrap.onStreamRead (internal/stream_base_commons.js:188:23)]]></failure>
    </testCase>
    <testCase name="User routes PATCH /v1/users/:userId should return 200 and successfully update user if admin is updating another user" duration="217">
      <failure message="TypeError: Cannot read property &apos;includes&apos; of undefined"><![CDATA[TypeError: Cannot read property 'includes' of undefined
    at every (/home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:14:82)
    at Array.every (<anonymous>)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:14:46
    at JwtStrategy.strategy.success (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:219:18)
    at done (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:115:41)
    at JwtStrategy.jwtVerify [as _verify] (/home/manuel/Documents/github/node-express-boilerplate/src/config/passport.js:20:5)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:123:34
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:223:12
    at getSecret (/home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:90:14)
    at Object.<anonymous>.module.exports [as verify] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:94:10)
    at Function.Object.<anonymous>.module.exports [as JwtVerifier] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/verify_jwt.js:4:16)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:104:25
    at JwtStrategy._secretOrKeyProvider (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:40:13)
    at JwtStrategy.Object.<anonymous>.JwtStrategy.authenticate (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:99:10)
    at attempt (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:366:16)
    at authenticate (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:367:7)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:25:5
    at new Promise (<anonymous>)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:24:10
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:137:13)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at Route.dispatch (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:112:3)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:281:22
    at param (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:354:14)
    at param (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:365:14)
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:410:3)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:174:3)
    at router (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:174:3)
    at router (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at initialize (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/initialize.js:53:5)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at cors (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:188:7)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:224:17
    at originCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:214:15)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:219:13
    at optionsCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:199:9)
    at corsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:204:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at compression (/home/manuel/Documents/github/node-express-boilerplate/node_modules/compression/index.js:220:5)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express-mongo-sanitize/index.js:84:5
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/xss-clean/src/index.js:13:5
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at urlencodedParser (/home/manuel/Documents/github/node-express-boilerplate/node_modules/body-parser/lib/types/urlencoded.js:82:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/body-parser/lib/read.js:130:5
    at invokeCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/raw-body/index.js:224:16)
    at done (/home/manuel/Documents/github/node-express-boilerplate/node_modules/raw-body/index.js:213:7)
    at IncomingMessage.onEnd (/home/manuel/Documents/github/node-express-boilerplate/node_modules/raw-body/index.js:273:7)
    at IncomingMessage.emit (events.js:327:22)
    at endReadableNT (internal/streams/readable.js:1327:12)
    at processTicksAndRejections (internal/process/task_queues.js:80:21)]]></failure>
    </testCase>
    <testCase name="User routes PATCH /v1/users/:userId should return 404 if admin is updating another user that is not found" duration="210">
      <failure message="TypeError: Cannot read property &apos;includes&apos; of undefined"><![CDATA[TypeError: Cannot read property 'includes' of undefined
    at every (/home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:14:82)
    at Array.every (<anonymous>)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:14:46
    at JwtStrategy.strategy.success (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:219:18)
    at done (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:115:41)
    at JwtStrategy.jwtVerify [as _verify] (/home/manuel/Documents/github/node-express-boilerplate/src/config/passport.js:20:5)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:123:34
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:223:12
    at getSecret (/home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:90:14)
    at Object.<anonymous>.module.exports [as verify] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:94:10)
    at Function.Object.<anonymous>.module.exports [as JwtVerifier] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/verify_jwt.js:4:16)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:104:25
    at JwtStrategy._secretOrKeyProvider (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:40:13)
    at JwtStrategy.Object.<anonymous>.JwtStrategy.authenticate (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:99:10)
    at attempt (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:366:16)
    at authenticate (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:367:7)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:25:5
    at new Promise (<anonymous>)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:24:10
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:137:13)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at Route.dispatch (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:112:3)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:281:22
    at param (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:354:14)
    at param (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:365:14)
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:410:3)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:174:3)
    at router (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:174:3)
    at router (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at initialize (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/initialize.js:53:5)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at cors (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:188:7)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:224:17
    at originCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:214:15)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:219:13
    at optionsCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:199:9)
    at corsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:204:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at compression (/home/manuel/Documents/github/node-express-boilerplate/node_modules/compression/index.js:220:5)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express-mongo-sanitize/index.js:84:5
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/xss-clean/src/index.js:13:5
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at urlencodedParser (/home/manuel/Documents/github/node-express-boilerplate/node_modules/body-parser/lib/types/urlencoded.js:82:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/body-parser/lib/read.js:130:5
    at invokeCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/raw-body/index.js:224:16)
    at done (/home/manuel/Documents/github/node-express-boilerplate/node_modules/raw-body/index.js:213:7)
    at IncomingMessage.onEnd (/home/manuel/Documents/github/node-express-boilerplate/node_modules/raw-body/index.js:273:7)
    at IncomingMessage.emit (events.js:327:22)
    at endReadableNT (internal/streams/readable.js:1327:12)
    at processTicksAndRejections (internal/process/task_queues.js:80:21)]]></failure>
    </testCase>
    <testCase name="User routes PATCH /v1/users/:userId should return 400 error if userId is not a valid mongo id" duration="218">
      <failure message="TypeError: Cannot read property &apos;includes&apos; of undefined"><![CDATA[TypeError: Cannot read property 'includes' of undefined
    at every (/home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:14:82)
    at Array.every (<anonymous>)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:14:46
    at JwtStrategy.strategy.success (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:219:18)
    at done (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:115:41)
    at JwtStrategy.jwtVerify [as _verify] (/home/manuel/Documents/github/node-express-boilerplate/src/config/passport.js:20:5)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:123:34
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:223:12
    at getSecret (/home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:90:14)
    at Object.<anonymous>.module.exports [as verify] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:94:10)
    at Function.Object.<anonymous>.module.exports [as JwtVerifier] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/verify_jwt.js:4:16)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:104:25
    at JwtStrategy._secretOrKeyProvider (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:40:13)
    at JwtStrategy.Object.<anonymous>.JwtStrategy.authenticate (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:99:10)
    at attempt (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:366:16)
    at authenticate (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:367:7)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:25:5
    at new Promise (<anonymous>)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:24:10
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:137:13)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at Route.dispatch (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:112:3)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:281:22
    at param (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:354:14)
    at param (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:365:14)
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:410:3)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:174:3)
    at router (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:174:3)
    at router (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at initialize (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/initialize.js:53:5)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at cors (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:188:7)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:224:17
    at originCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:214:15)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:219:13
    at optionsCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:199:9)
    at corsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:204:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at compression (/home/manuel/Documents/github/node-express-boilerplate/node_modules/compression/index.js:220:5)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express-mongo-sanitize/index.js:84:5
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/xss-clean/src/index.js:13:5
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at urlencodedParser (/home/manuel/Documents/github/node-express-boilerplate/node_modules/body-parser/lib/types/urlencoded.js:82:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/body-parser/lib/read.js:130:5
    at invokeCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/raw-body/index.js:224:16)
    at done (/home/manuel/Documents/github/node-express-boilerplate/node_modules/raw-body/index.js:213:7)
    at IncomingMessage.onEnd (/home/manuel/Documents/github/node-express-boilerplate/node_modules/raw-body/index.js:273:7)
    at IncomingMessage.emit (events.js:327:22)
    at endReadableNT (internal/streams/readable.js:1327:12)
    at processTicksAndRejections (internal/process/task_queues.js:80:21)]]></failure>
    </testCase>
    <testCase name="User routes PATCH /v1/users/:userId should return 400 if email is invalid" duration="203">
      <failure message="TypeError: Cannot read property &apos;includes&apos; of undefined"><![CDATA[TypeError: Cannot read property 'includes' of undefined
    at every (/home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:14:82)
    at Array.every (<anonymous>)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:14:46
    at JwtStrategy.strategy.success (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:219:18)
    at done (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:115:41)
    at JwtStrategy.jwtVerify [as _verify] (/home/manuel/Documents/github/node-express-boilerplate/src/config/passport.js:20:5)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:123:34
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:223:12
    at getSecret (/home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:90:14)
    at Object.<anonymous>.module.exports [as verify] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:94:10)
    at Function.Object.<anonymous>.module.exports [as JwtVerifier] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/verify_jwt.js:4:16)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:104:25
    at JwtStrategy._secretOrKeyProvider (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:40:13)
    at JwtStrategy.Object.<anonymous>.JwtStrategy.authenticate (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:99:10)
    at attempt (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:366:16)
    at authenticate (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:367:7)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:25:5
    at new Promise (<anonymous>)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:24:10
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:137:13)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at Route.dispatch (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:112:3)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:281:22
    at param (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:354:14)
    at param (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:365:14)
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:410:3)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:174:3)
    at router (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:174:3)
    at router (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at initialize (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/initialize.js:53:5)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at cors (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:188:7)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:224:17
    at originCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:214:15)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:219:13
    at optionsCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:199:9)
    at corsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:204:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at compression (/home/manuel/Documents/github/node-express-boilerplate/node_modules/compression/index.js:220:5)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express-mongo-sanitize/index.js:84:5
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/xss-clean/src/index.js:13:5
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at urlencodedParser (/home/manuel/Documents/github/node-express-boilerplate/node_modules/body-parser/lib/types/urlencoded.js:82:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/body-parser/lib/read.js:130:5
    at invokeCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/raw-body/index.js:224:16)
    at done (/home/manuel/Documents/github/node-express-boilerplate/node_modules/raw-body/index.js:213:7)
    at IncomingMessage.onEnd (/home/manuel/Documents/github/node-express-boilerplate/node_modules/raw-body/index.js:273:7)
    at IncomingMessage.emit (events.js:327:22)
    at endReadableNT (internal/streams/readable.js:1327:12)
    at processTicksAndRejections (internal/process/task_queues.js:80:21)]]></failure>
    </testCase>
    <testCase name="User routes PATCH /v1/users/:userId should return 400 if email is already taken" duration="206">
      <failure message="BulkWriteError: E11000 duplicate key error collection: test-test.users index: email_1 dup key: { email: &quot;mafalda_lang37@gmail.com&quot; }"><![CDATA[BulkWriteError: E11000 duplicate key error collection: test-test.users index: email_1 dup key: { email: "mafalda_lang37@gmail.com" }
    at OrderedBulkOperation.handleWriteError (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/bulk/common.js:1258:9)
    at resultHandler (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/bulk/common.js:521:23)
    at handler (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/core/sdam/topology.js:944:24)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/cmap/connection_pool.js:350:13
    at handleOperationResult (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/core/sdam/server.js:558:5)
    at MessageStream.messageHandler (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/cmap/connection.js:277:5)
    at MessageStream.emit (events.js:315:20)
    at processIncomingData (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/cmap/message_stream.js:144:12)
    at MessageStream._write (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/cmap/message_stream.js:42:5)
    at writeOrBuffer (internal/streams/writable.js:358:12)
    at MessageStream.Writable.write (internal/streams/writable.js:303:10)
    at TLSSocket.ondata (internal/streams/readable.js:719:22)
    at TLSSocket.emit (events.js:315:20)
    at addChunk (internal/streams/readable.js:309:12)
    at readableAddChunk (internal/streams/readable.js:284:9)
    at TLSSocket.Readable.push (internal/streams/readable.js:223:10)
    at TLSWrap.onStreamRead (internal/stream_base_commons.js:188:23)]]></failure>
    </testCase>
    <testCase name="User routes PATCH /v1/users/:userId should not return 400 if email is my email" duration="213">
      <failure message="TypeError: Cannot read property &apos;includes&apos; of undefined"><![CDATA[TypeError: Cannot read property 'includes' of undefined
    at every (/home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:14:82)
    at Array.every (<anonymous>)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:14:46
    at JwtStrategy.strategy.success (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:219:18)
    at done (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:115:41)
    at JwtStrategy.jwtVerify [as _verify] (/home/manuel/Documents/github/node-express-boilerplate/src/config/passport.js:20:5)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:123:34
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:223:12
    at getSecret (/home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:90:14)
    at Object.<anonymous>.module.exports [as verify] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:94:10)
    at Function.Object.<anonymous>.module.exports [as JwtVerifier] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/verify_jwt.js:4:16)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:104:25
    at JwtStrategy._secretOrKeyProvider (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:40:13)
    at JwtStrategy.Object.<anonymous>.JwtStrategy.authenticate (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:99:10)
    at attempt (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:366:16)
    at authenticate (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:367:7)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:25:5
    at new Promise (<anonymous>)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:24:10
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:137:13)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at Route.dispatch (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:112:3)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:281:22
    at param (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:354:14)
    at param (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:365:14)
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:410:3)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:174:3)
    at router (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:174:3)
    at router (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at initialize (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/initialize.js:53:5)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at cors (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:188:7)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:224:17
    at originCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:214:15)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:219:13
    at optionsCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:199:9)
    at corsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:204:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at compression (/home/manuel/Documents/github/node-express-boilerplate/node_modules/compression/index.js:220:5)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express-mongo-sanitize/index.js:84:5
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/xss-clean/src/index.js:13:5
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at urlencodedParser (/home/manuel/Documents/github/node-express-boilerplate/node_modules/body-parser/lib/types/urlencoded.js:82:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/body-parser/lib/read.js:130:5
    at invokeCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/raw-body/index.js:224:16)
    at done (/home/manuel/Documents/github/node-express-boilerplate/node_modules/raw-body/index.js:213:7)
    at IncomingMessage.onEnd (/home/manuel/Documents/github/node-express-boilerplate/node_modules/raw-body/index.js:273:7)
    at IncomingMessage.emit (events.js:327:22)
    at endReadableNT (internal/streams/readable.js:1327:12)
    at processTicksAndRejections (internal/process/task_queues.js:80:21)]]></failure>
    </testCase>
    <testCase name="User routes PATCH /v1/users/:userId should return 400 if password length is less than 8 characters" duration="199">
      <failure message="TypeError: Cannot read property &apos;includes&apos; of undefined"><![CDATA[TypeError: Cannot read property 'includes' of undefined
    at every (/home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:14:82)
    at Array.every (<anonymous>)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:14:46
    at JwtStrategy.strategy.success (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:219:18)
    at done (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:115:41)
    at JwtStrategy.jwtVerify [as _verify] (/home/manuel/Documents/github/node-express-boilerplate/src/config/passport.js:20:5)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:123:34
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:223:12
    at getSecret (/home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:90:14)
    at Object.<anonymous>.module.exports [as verify] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:94:10)
    at Function.Object.<anonymous>.module.exports [as JwtVerifier] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/verify_jwt.js:4:16)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:104:25
    at JwtStrategy._secretOrKeyProvider (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:40:13)
    at JwtStrategy.Object.<anonymous>.JwtStrategy.authenticate (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:99:10)
    at attempt (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:366:16)
    at authenticate (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:367:7)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:25:5
    at new Promise (<anonymous>)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:24:10
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:137:13)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at Route.dispatch (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:112:3)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:281:22
    at param (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:354:14)
    at param (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:365:14)
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:410:3)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:174:3)
    at router (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:174:3)
    at router (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at initialize (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/initialize.js:53:5)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at cors (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:188:7)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:224:17
    at originCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:214:15)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:219:13
    at optionsCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:199:9)
    at corsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:204:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at compression (/home/manuel/Documents/github/node-express-boilerplate/node_modules/compression/index.js:220:5)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express-mongo-sanitize/index.js:84:5
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/xss-clean/src/index.js:13:5
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at urlencodedParser (/home/manuel/Documents/github/node-express-boilerplate/node_modules/body-parser/lib/types/urlencoded.js:82:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/body-parser/lib/read.js:130:5
    at invokeCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/raw-body/index.js:224:16)
    at done (/home/manuel/Documents/github/node-express-boilerplate/node_modules/raw-body/index.js:213:7)
    at IncomingMessage.onEnd (/home/manuel/Documents/github/node-express-boilerplate/node_modules/raw-body/index.js:273:7)
    at IncomingMessage.emit (events.js:327:22)
    at endReadableNT (internal/streams/readable.js:1327:12)
    at processTicksAndRejections (internal/process/task_queues.js:80:21)]]></failure>
    </testCase>
    <testCase name="User routes PATCH /v1/users/:userId should return 400 if password does not contain both letters and numbers" duration="189">
      <failure message="TypeError: Cannot read property &apos;includes&apos; of undefined"><![CDATA[TypeError: Cannot read property 'includes' of undefined
    at every (/home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:14:82)
    at Array.every (<anonymous>)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:14:46
    at JwtStrategy.strategy.success (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:219:18)
    at done (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:115:41)
    at JwtStrategy.jwtVerify [as _verify] (/home/manuel/Documents/github/node-express-boilerplate/src/config/passport.js:20:5)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:123:34
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:223:12
    at getSecret (/home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:90:14)
    at Object.<anonymous>.module.exports [as verify] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:94:10)
    at Function.Object.<anonymous>.module.exports [as JwtVerifier] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/verify_jwt.js:4:16)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:104:25
    at JwtStrategy._secretOrKeyProvider (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:40:13)
    at JwtStrategy.Object.<anonymous>.JwtStrategy.authenticate (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:99:10)
    at attempt (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:366:16)
    at authenticate (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:367:7)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:25:5
    at new Promise (<anonymous>)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:24:10
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:137:13)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:131:14)
    at Route.dispatch (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/route.js:112:3)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:281:22
    at param (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:354:14)
    at param (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:365:14)
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:410:3)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:174:3)
    at router (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:174:3)
    at router (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at initialize (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/initialize.js:53:5)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at cors (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:188:7)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:224:17
    at originCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:214:15)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:219:13
    at optionsCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:199:9)
    at corsMiddleware (/home/manuel/Documents/github/node-express-boilerplate/node_modules/cors/lib/index.js:204:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at compression (/home/manuel/Documents/github/node-express-boilerplate/node_modules/compression/index.js:220:5)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express-mongo-sanitize/index.js:84:5
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/xss-clean/src/index.js:13:5
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at urlencodedParser (/home/manuel/Documents/github/node-express-boilerplate/node_modules/body-parser/lib/types/urlencoded.js:82:7)
    at Layer.handle [as handle_request] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:317:13)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:335:12)
    at next (/home/manuel/Documents/github/node-express-boilerplate/node_modules/express/lib/router/index.js:275:10)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/body-parser/lib/read.js:130:5
    at invokeCallback (/home/manuel/Documents/github/node-express-boilerplate/node_modules/raw-body/index.js:224:16)
    at done (/home/manuel/Documents/github/node-express-boilerplate/node_modules/raw-body/index.js:213:7)
    at IncomingMessage.onEnd (/home/manuel/Documents/github/node-express-boilerplate/node_modules/raw-body/index.js:273:7)
    at IncomingMessage.emit (events.js:327:22)
    at endReadableNT (internal/streams/readable.js:1327:12)
    at processTicksAndRejections (internal/process/task_queues.js:80:21)]]></failure>
    </testCase>
  </file>
  <file path="/home/manuel/Documents/github/node-express-boilerplate/tests/integration/auth.test.js">
    <testCase name="Auth routes POST /v1/auth/register should return 201 and successfully register user if request data is ok" duration="957">
      <failure message="TypeError: Cannot read property &apos;password&apos; of null"><![CDATA[TypeError: Cannot read property 'password' of null
    at Object.<anonymous> (/home/manuel/Documents/github/node-express-boilerplate/tests/integration/auth.test.js:46:21)
    at processTicksAndRejections (internal/process/task_queues.js:93:5)]]></failure>
    </testCase>
    <testCase name="Auth routes POST /v1/auth/register should return 400 error if email is invalid" duration="104"/>
    <testCase name="Auth routes POST /v1/auth/register should return 400 error if email is already used" duration="420">
      <failure message="Error: expected 400 &quot;Bad Request&quot;, got 500 &quot;Internal Server Error&quot;"><![CDATA[Error: expected 400 "Bad Request", got 500 "Internal Server Error"
    at Object.<anonymous> (/home/manuel/Documents/github/node-express-boilerplate/tests/integration/auth.test.js:65:66)
    at processTicksAndRejections (internal/process/task_queues.js:93:5)
----
    at Test.Object.<anonymous>.Test._assertStatus (/home/manuel/Documents/github/node-express-boilerplate/node_modules/supertest/lib/test.js:296:12)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/supertest/lib/test.js:80:15
    at Test.Object.<anonymous>.Test._assertFunction (/home/manuel/Documents/github/node-express-boilerplate/node_modules/supertest/lib/test.js:311:11)
    at Test.Object.<anonymous>.Test.assert (/home/manuel/Documents/github/node-express-boilerplate/node_modules/supertest/lib/test.js:201:21)
    at Server.localAssert (/home/manuel/Documents/github/node-express-boilerplate/node_modules/supertest/lib/test.js:159:12)
    at Object.onceWrapper (events.js:421:28)
    at Server.emit (events.js:315:20)
    at emitCloseNT (net.js:1659:8)
    at processTicksAndRejections (internal/process/task_queues.js:79:21)]]></failure>
    </testCase>
    <testCase name="Auth routes POST /v1/auth/register should return 400 error if password length is less than 8 characters" duration="109"/>
    <testCase name="Auth routes POST /v1/auth/register should return 400 error if password does not contain both letters and numbers" duration="100"/>
    <testCase name="Auth routes POST /v1/auth/login should return 200 and login user if email and password match" duration="312">
      <failure message="Error: expected 200 &quot;OK&quot;, got 401 &quot;Unauthorized&quot;"><![CDATA[Error: expected 200 "OK", got 401 "Unauthorized"
    at Object.<anonymous> (/home/manuel/Documents/github/node-express-boilerplate/tests/integration/auth.test.js:93:84)
    at processTicksAndRejections (internal/process/task_queues.js:93:5)
----
    at Test.Object.<anonymous>.Test._assertStatus (/home/manuel/Documents/github/node-express-boilerplate/node_modules/supertest/lib/test.js:296:12)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/supertest/lib/test.js:80:15
    at Test.Object.<anonymous>.Test._assertFunction (/home/manuel/Documents/github/node-express-boilerplate/node_modules/supertest/lib/test.js:311:11)
    at Test.Object.<anonymous>.Test.assert (/home/manuel/Documents/github/node-express-boilerplate/node_modules/supertest/lib/test.js:201:21)
    at Server.localAssert (/home/manuel/Documents/github/node-express-boilerplate/node_modules/supertest/lib/test.js:159:12)
    at Object.onceWrapper (events.js:421:28)
    at Server.emit (events.js:315:20)
    at emitCloseNT (net.js:1659:8)
    at processTicksAndRejections (internal/process/task_queues.js:79:21)]]></failure>
    </testCase>
    <testCase name="Auth routes POST /v1/auth/login should return 401 error if there are no users with that email" duration="210"/>
    <testCase name="Auth routes POST /v1/auth/login should return 401 error if password is wrong" duration="361"/>
    <testCase name="Auth routes POST /v1/auth/logout should return 204 if refresh token is valid" duration="182">
      <failure message="BulkWriteError: E11000 duplicate key error collection: test-test.users index: email_1 dup key: { email: &quot;mafalda_lang37@gmail.com&quot; }"><![CDATA[BulkWriteError: E11000 duplicate key error collection: test-test.users index: email_1 dup key: { email: "mafalda_lang37@gmail.com" }
    at OrderedBulkOperation.handleWriteError (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/bulk/common.js:1258:9)
    at resultHandler (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/bulk/common.js:521:23)
    at handler (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/core/sdam/topology.js:944:24)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/cmap/connection_pool.js:350:13
    at handleOperationResult (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/core/sdam/server.js:558:5)
    at MessageStream.messageHandler (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/cmap/connection.js:277:5)
    at MessageStream.emit (events.js:315:20)
    at processIncomingData (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/cmap/message_stream.js:144:12)
    at MessageStream._write (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/cmap/message_stream.js:42:5)
    at writeOrBuffer (internal/streams/writable.js:358:12)
    at MessageStream.Writable.write (internal/streams/writable.js:303:10)
    at TLSSocket.ondata (internal/streams/readable.js:719:22)
    at TLSSocket.emit (events.js:315:20)
    at addChunk (internal/streams/readable.js:309:12)
    at readableAddChunk (internal/streams/readable.js:284:9)
    at TLSSocket.Readable.push (internal/streams/readable.js:223:10)
    at TLSWrap.onStreamRead (internal/stream_base_commons.js:188:23)]]></failure>
    </testCase>
    <testCase name="Auth routes POST /v1/auth/logout should return 400 error if refresh token is missing from request body" duration="95"/>
    <testCase name="Auth routes POST /v1/auth/logout should return 404 error if refresh token is not found in the database" duration="291"/>
    <testCase name="Auth routes POST /v1/auth/logout should return 404 error if refresh token is blacklisted" duration="453"/>
    <testCase name="Auth routes POST /v1/auth/refresh-tokens should return 200 and new auth tokens if refresh token is valid" duration="511">
      <failure message="Error: expected 200 &quot;OK&quot;, got 401 &quot;Unauthorized&quot;"><![CDATA[Error: expected 200 "OK", got 401 "Unauthorized"
    at Object.<anonymous> (/home/manuel/Documents/github/node-express-boilerplate/tests/integration/auth.test.js:175:93)
    at processTicksAndRejections (internal/process/task_queues.js:93:5)
----
    at Test.Object.<anonymous>.Test._assertStatus (/home/manuel/Documents/github/node-express-boilerplate/node_modules/supertest/lib/test.js:296:12)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/supertest/lib/test.js:80:15
    at Test.Object.<anonymous>.Test._assertFunction (/home/manuel/Documents/github/node-express-boilerplate/node_modules/supertest/lib/test.js:311:11)
    at Test.Object.<anonymous>.Test.assert (/home/manuel/Documents/github/node-express-boilerplate/node_modules/supertest/lib/test.js:201:21)
    at Server.localAssert (/home/manuel/Documents/github/node-express-boilerplate/node_modules/supertest/lib/test.js:159:12)
    at Object.onceWrapper (events.js:421:28)
    at Server.emit (events.js:315:20)
    at emitCloseNT (net.js:1659:8)
    at processTicksAndRejections (internal/process/task_queues.js:79:21)]]></failure>
    </testCase>
    <testCase name="Auth routes POST /v1/auth/refresh-tokens should return 400 error if refresh token is missing from request body" duration="114"/>
    <testCase name="Auth routes POST /v1/auth/refresh-tokens should return 401 error if refresh token is signed using an invalid secret" duration="321"/>
    <testCase name="Auth routes POST /v1/auth/refresh-tokens should return 401 error if refresh token is not found in the database" duration="324"/>
    <testCase name="Auth routes POST /v1/auth/refresh-tokens should return 401 error if refresh token is blacklisted" duration="410"/>
    <testCase name="Auth routes POST /v1/auth/refresh-tokens should return 401 error if refresh token is expired" duration="291"/>
    <testCase name="Auth routes POST /v1/auth/refresh-tokens should return 401 error if user is not found" duration="385"/>
    <testCase name="Auth routes POST /v1/auth/forgot-password should return 204 and send reset password email to the user" duration="214">
      <failure message="BulkWriteError: E11000 duplicate key error collection: test-test.users index: email_1 dup key: { email: &quot;mafalda_lang37@gmail.com&quot; }"><![CDATA[BulkWriteError: E11000 duplicate key error collection: test-test.users index: email_1 dup key: { email: "mafalda_lang37@gmail.com" }
    at OrderedBulkOperation.handleWriteError (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/bulk/common.js:1258:9)
    at resultHandler (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/bulk/common.js:521:23)
    at handler (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/core/sdam/topology.js:944:24)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/cmap/connection_pool.js:350:13
    at handleOperationResult (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/core/sdam/server.js:558:5)
    at MessageStream.messageHandler (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/cmap/connection.js:277:5)
    at MessageStream.emit (events.js:315:20)
    at processIncomingData (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/cmap/message_stream.js:144:12)
    at MessageStream._write (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/cmap/message_stream.js:42:5)
    at writeOrBuffer (internal/streams/writable.js:358:12)
    at MessageStream.Writable.write (internal/streams/writable.js:303:10)
    at TLSSocket.ondata (internal/streams/readable.js:719:22)
    at TLSSocket.emit (events.js:315:20)
    at addChunk (internal/streams/readable.js:309:12)
    at readableAddChunk (internal/streams/readable.js:284:9)
    at TLSSocket.Readable.push (internal/streams/readable.js:223:10)
    at TLSWrap.onStreamRead (internal/stream_base_commons.js:188:23)]]></failure>
    </testCase>
    <testCase name="Auth routes POST /v1/auth/forgot-password should return 400 if email is missing" duration="208"/>
    <testCase name="Auth routes POST /v1/auth/forgot-password should return 404 if email does not belong to any user" duration="188"/>
    <testCase name="Auth routes POST /v1/auth/reset-password should return 204 and reset the password" duration="519">
      <failure message="Error: expected 204 &quot;No Content&quot;, got 401 &quot;Unauthorized&quot;"><![CDATA[Error: expected 204 "No Content", got 401 "Unauthorized"
    at Object.<anonymous> (/home/manuel/Documents/github/node-express-boilerplate/tests/integration/auth.test.js:276:10)
    at processTicksAndRejections (internal/process/task_queues.js:93:5)
----
    at Test.Object.<anonymous>.Test._assertStatus (/home/manuel/Documents/github/node-express-boilerplate/node_modules/supertest/lib/test.js:296:12)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/supertest/lib/test.js:80:15
    at Test.Object.<anonymous>.Test._assertFunction (/home/manuel/Documents/github/node-express-boilerplate/node_modules/supertest/lib/test.js:311:11)
    at Test.Object.<anonymous>.Test.assert (/home/manuel/Documents/github/node-express-boilerplate/node_modules/supertest/lib/test.js:201:21)
    at Server.localAssert (/home/manuel/Documents/github/node-express-boilerplate/node_modules/supertest/lib/test.js:159:12)
    at Object.onceWrapper (events.js:421:28)
    at Server.emit (events.js:315:20)
    at emitCloseNT (net.js:1659:8)
    at processTicksAndRejections (internal/process/task_queues.js:79:21)]]></failure>
    </testCase>
    <testCase name="Auth routes POST /v1/auth/reset-password should return 400 if reset password token is missing" duration="210"/>
    <testCase name="Auth routes POST /v1/auth/reset-password should return 401 if reset password token is blacklisted" duration="208">
      <failure message="BulkWriteError: E11000 duplicate key error collection: test-test.users index: email_1 dup key: { email: &quot;mafalda_lang37@gmail.com&quot; }"><![CDATA[BulkWriteError: E11000 duplicate key error collection: test-test.users index: email_1 dup key: { email: "mafalda_lang37@gmail.com" }
    at OrderedBulkOperation.handleWriteError (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/bulk/common.js:1258:9)
    at resultHandler (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/bulk/common.js:521:23)
    at handler (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/core/sdam/topology.js:944:24)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/cmap/connection_pool.js:350:13
    at handleOperationResult (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/core/sdam/server.js:558:5)
    at MessageStream.messageHandler (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/cmap/connection.js:277:5)
    at MessageStream.emit (events.js:315:20)
    at processIncomingData (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/cmap/message_stream.js:144:12)
    at MessageStream._write (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/cmap/message_stream.js:42:5)
    at writeOrBuffer (internal/streams/writable.js:358:12)
    at MessageStream.Writable.write (internal/streams/writable.js:303:10)
    at TLSSocket.ondata (internal/streams/readable.js:719:22)
    at TLSSocket.emit (events.js:315:20)
    at addChunk (internal/streams/readable.js:309:12)
    at readableAddChunk (internal/streams/readable.js:284:9)
    at TLSSocket.Readable.push (internal/streams/readable.js:223:10)
    at TLSWrap.onStreamRead (internal/stream_base_commons.js:188:23)]]></failure>
    </testCase>
    <testCase name="Auth routes POST /v1/auth/reset-password should return 401 if reset password token is expired" duration="320"/>
    <testCase name="Auth routes POST /v1/auth/reset-password should return 401 if user is not found" duration="298"/>
    <testCase name="Auth routes POST /v1/auth/reset-password should return 400 if password is missing or invalid" duration="319"/>
    <testCase name="Auth routes POST /v1/auth/send-verification-email should return 204 and send verification email to the user" duration="215">
      <failure message="Error: expected 204 &quot;No Content&quot;, got 400 &quot;Bad Request&quot;"><![CDATA[Error: expected 204 "No Content", got 400 "Bad Request"
    at Object.<anonymous> (/home/manuel/Documents/github/node-express-boilerplate/tests/integration/auth.test.js:370:10)
    at processTicksAndRejections (internal/process/task_queues.js:93:5)
----
    at Test.Object.<anonymous>.Test._assertStatus (/home/manuel/Documents/github/node-express-boilerplate/node_modules/supertest/lib/test.js:296:12)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/supertest/lib/test.js:80:15
    at Test.Object.<anonymous>.Test._assertFunction (/home/manuel/Documents/github/node-express-boilerplate/node_modules/supertest/lib/test.js:311:11)
    at Test.Object.<anonymous>.Test.assert (/home/manuel/Documents/github/node-express-boilerplate/node_modules/supertest/lib/test.js:201:21)
    at Server.localAssert (/home/manuel/Documents/github/node-express-boilerplate/node_modules/supertest/lib/test.js:159:12)
    at Object.onceWrapper (events.js:421:28)
    at Server.emit (events.js:315:20)
    at emitCloseNT (net.js:1659:8)
    at processTicksAndRejections (internal/process/task_queues.js:79:21)]]></failure>
    </testCase>
    <testCase name="Auth routes POST /v1/auth/send-verification-email should return 401 error if access token is missing" duration="188">
      <failure message="BulkWriteError: E11000 duplicate key error collection: test-test.users index: email_1 dup key: { email: &quot;mafalda_lang37@gmail.com&quot; }"><![CDATA[BulkWriteError: E11000 duplicate key error collection: test-test.users index: email_1 dup key: { email: "mafalda_lang37@gmail.com" }
    at OrderedBulkOperation.handleWriteError (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/bulk/common.js:1258:9)
    at resultHandler (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/bulk/common.js:521:23)
    at handler (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/core/sdam/topology.js:944:24)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/cmap/connection_pool.js:350:13
    at handleOperationResult (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/core/sdam/server.js:558:5)
    at MessageStream.messageHandler (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/cmap/connection.js:277:5)
    at MessageStream.emit (events.js:315:20)
    at processIncomingData (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/cmap/message_stream.js:144:12)
    at MessageStream._write (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/cmap/message_stream.js:42:5)
    at writeOrBuffer (internal/streams/writable.js:358:12)
    at MessageStream.Writable.write (internal/streams/writable.js:303:10)
    at TLSSocket.ondata (internal/streams/readable.js:719:22)
    at TLSSocket.emit (events.js:315:20)
    at addChunk (internal/streams/readable.js:309:12)
    at readableAddChunk (internal/streams/readable.js:284:9)
    at TLSSocket.Readable.push (internal/streams/readable.js:223:10)
    at TLSWrap.onStreamRead (internal/stream_base_commons.js:188:23)]]></failure>
    </testCase>
    <testCase name="Auth routes POST /v1/auth/verify-email should return 204 and verify the email" duration="199">
      <failure message="BulkWriteError: E11000 duplicate key error collection: test-test.users index: email_1 dup key: { email: &quot;mafalda_lang37@gmail.com&quot; }"><![CDATA[BulkWriteError: E11000 duplicate key error collection: test-test.users index: email_1 dup key: { email: "mafalda_lang37@gmail.com" }
    at OrderedBulkOperation.handleWriteError (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/bulk/common.js:1258:9)
    at resultHandler (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/bulk/common.js:521:23)
    at handler (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/core/sdam/topology.js:944:24)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/cmap/connection_pool.js:350:13
    at handleOperationResult (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/core/sdam/server.js:558:5)
    at MessageStream.messageHandler (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/cmap/connection.js:277:5)
    at MessageStream.emit (events.js:315:20)
    at processIncomingData (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/cmap/message_stream.js:144:12)
    at MessageStream._write (/home/manuel/Documents/github/node-express-boilerplate/node_modules/mongodb/lib/cmap/message_stream.js:42:5)
    at writeOrBuffer (internal/streams/writable.js:358:12)
    at MessageStream.Writable.write (internal/streams/writable.js:303:10)
    at TLSSocket.ondata (internal/streams/readable.js:719:22)
    at TLSSocket.emit (events.js:315:20)
    at addChunk (internal/streams/readable.js:309:12)
    at readableAddChunk (internal/streams/readable.js:284:9)
    at TLSSocket.Readable.push (internal/streams/readable.js:223:10)
    at TLSWrap.onStreamRead (internal/stream_base_commons.js:188:23)]]></failure>
    </testCase>
    <testCase name="Auth routes POST /v1/auth/verify-email should return 400 if verify email token is missing" duration="185"/>
    <testCase name="Auth routes POST /v1/auth/verify-email should return 401 if verify email token is blacklisted" duration="388"/>
    <testCase name="Auth routes POST /v1/auth/verify-email should return 401 if verify email token is expired" duration="306"/>
    <testCase name="Auth routes POST /v1/auth/verify-email should return 401 if user is not found" duration="366"/>
    <testCase name="Auth middleware should call next with no errors if access token is valid" duration="229">
      <failure message="Error: expect(received).toEqual(expected) // deep equality"><![CDATA[Error: expect(received).toEqual(expected) // deep equality

Expected: "60b84164149ccb808e148076"
Received: undefined
    at Object.<anonymous> (/home/manuel/Documents/github/node-express-boilerplate/tests/integration/auth.test.js:465:26)
    at processTicksAndRejections (internal/process/task_queues.js:93:5)]]></failure>
    </testCase>
    <testCase name="Auth middleware should call next with unauthorized error if access token is not found in header" duration="208"/>
    <testCase name="Auth middleware should call next with unauthorized error if access token is not a valid jwt token" duration="229"/>
    <testCase name="Auth middleware should call next with unauthorized error if the token is not an access token" duration="202"/>
    <testCase name="Auth middleware should call next with unauthorized error if access token is generated with an invalid secret" duration="188"/>
    <testCase name="Auth middleware should call next with unauthorized error if access token is expired" duration="191"/>
    <testCase name="Auth middleware should call next with unauthorized error if user is not found" duration="97">
      <failure message="Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)"><![CDATA[Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)

Expected: Any<ApiError>
Received: called with 0 arguments

Number of calls: 1
    at Object.<anonymous> (/home/manuel/Documents/github/node-express-boilerplate/tests/integration/auth.test.js:545:18)
    at processTicksAndRejections (internal/process/task_queues.js:93:5)]]></failure>
    </testCase>
    <testCase name="Auth middleware should call next with forbidden error if user does not have required rights and userId is not in params" duration="221">
      <failure message="TypeError: Cannot read property &apos;includes&apos; of undefined"><![CDATA[TypeError: Cannot read property 'includes' of undefined
    at every (/home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:14:82)
    at Array.every (<anonymous>)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:14:46
    at JwtStrategy.strategy.success (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:219:18)
    at done (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:115:41)
    at JwtStrategy.jwtVerify [as _verify] (/home/manuel/Documents/github/node-express-boilerplate/src/config/passport.js:20:5)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:123:34
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:223:12
    at getSecret (/home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:90:14)
    at Object.<anonymous>.module.exports [as verify] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:94:10)
    at Function.Object.<anonymous>.module.exports [as JwtVerifier] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/verify_jwt.js:4:16)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:104:25
    at JwtStrategy._secretOrKeyProvider (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:40:13)
    at JwtStrategy.Object.<anonymous>.JwtStrategy.authenticate (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:99:10)
    at attempt (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:366:16)
    at authenticate (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:367:7)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:25:5
    at new Promise (<anonymous>)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:24:10
    at Object.<anonymous> (/home/manuel/Documents/github/node-express-boilerplate/tests/integration/auth.test.js:556:27)
    at processTicksAndRejections (internal/process/task_queues.js:93:5)]]></failure>
    </testCase>
    <testCase name="Auth middleware should call next with no errors if user does not have required rights but userId is in params" duration="209">
      <failure message="TypeError: Cannot read property &apos;includes&apos; of undefined"><![CDATA[TypeError: Cannot read property 'includes' of undefined
    at every (/home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:14:82)
    at Array.every (<anonymous>)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:14:46
    at JwtStrategy.strategy.success (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:219:18)
    at done (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:115:41)
    at JwtStrategy.jwtVerify [as _verify] (/home/manuel/Documents/github/node-express-boilerplate/src/config/passport.js:20:5)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:123:34
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:223:12
    at getSecret (/home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:90:14)
    at Object.<anonymous>.module.exports [as verify] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:94:10)
    at Function.Object.<anonymous>.module.exports [as JwtVerifier] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/verify_jwt.js:4:16)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:104:25
    at JwtStrategy._secretOrKeyProvider (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:40:13)
    at JwtStrategy.Object.<anonymous>.JwtStrategy.authenticate (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:99:10)
    at attempt (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:366:16)
    at authenticate (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:367:7)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:25:5
    at new Promise (<anonymous>)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:24:10
    at Object.<anonymous> (/home/manuel/Documents/github/node-express-boilerplate/tests/integration/auth.test.js:570:27)
    at processTicksAndRejections (internal/process/task_queues.js:93:5)]]></failure>
    </testCase>
    <testCase name="Auth middleware should call next with no errors if user has required rights" duration="195">
      <failure message="TypeError: Cannot read property &apos;includes&apos; of undefined"><![CDATA[TypeError: Cannot read property 'includes' of undefined
    at every (/home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:14:82)
    at Array.every (<anonymous>)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:14:46
    at JwtStrategy.strategy.success (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:219:18)
    at done (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:115:41)
    at JwtStrategy.jwtVerify [as _verify] (/home/manuel/Documents/github/node-express-boilerplate/src/config/passport.js:20:5)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:123:34
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:223:12
    at getSecret (/home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:90:14)
    at Object.<anonymous>.module.exports [as verify] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/jsonwebtoken/verify.js:94:10)
    at Function.Object.<anonymous>.module.exports [as JwtVerifier] (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/verify_jwt.js:4:16)
    at /home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:104:25
    at JwtStrategy._secretOrKeyProvider (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:40:13)
    at JwtStrategy.Object.<anonymous>.JwtStrategy.authenticate (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport-jwt/lib/strategy.js:99:10)
    at attempt (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:366:16)
    at authenticate (/home/manuel/Documents/github/node-express-boilerplate/node_modules/passport/lib/middleware/authenticate.js:367:7)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:25:5
    at new Promise (<anonymous>)
    at /home/manuel/Documents/github/node-express-boilerplate/src/middlewares/auth.js:24:10
    at Object.<anonymous> (/home/manuel/Documents/github/node-express-boilerplate/tests/integration/auth.test.js:583:43)
    at processTicksAndRejections (internal/process/task_queues.js:93:5)]]></failure>
    </testCase>
  </file>
</testExecutions>